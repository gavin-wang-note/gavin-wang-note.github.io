I"×<h1 id="ç°è±¡">ç°è±¡</h1>
<p>Oracle11g 11.1.0.6.0å®‰è£…å°è¡¥ä¸ç‰ˆæœ¬å¤±è´¥,å®‰è£…å°è¡¥ä¸ï¼šp6928169_111060_Linux-x86-64.zip</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>opyright (c) 2007, Oracle Corporation.  All rights reserved.


Oracle Home       : /opt/oracle/app/product/11.1.0/db_1
Central Inventory : /opt/oraInventory
   from           : /etc/oraInst.loc
OPatch version    : 11.1.0.6.0
OUI version       : 11.1.0.6.0
OUI location      : /opt/oracle/app/product/11.1.0/db_1/oui
Log file location : /opt/oracle/app/product/11.1.0/db_1/cfgtoollogs/opatch/opatch2009-03-06_14-16-49PM.log

ApplySession applying interim patch '6928169' to OH '/opt/oracle/app/product/11.1.0/db_1'

Running prerequisite checks...
Prerequisite check "CheckActiveFilesAndExecutables" failed.
The details are:


Following executables are active :
/opt/oracle/app/product/11.1.0/db_1/bin/oracle
ApplySession failed during prerequisite checks: Prerequisite check "CheckActiveFilesAndExecutables" failed.
System intact, OPatch will not attempt to restore the system

OPatch failed with error code 74
oracle@expsmgw:/opt/oraInventory/6928169&gt;
</code></pre></div></div>

<h1 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h1>

<p>å½“æ—¶æ²¡è§£å†³ï¼Œåªæœ‰å®‰è£…äº†å¤§è¡¥ä¸æ‰è§£å†³é—®é¢˜ã€‚ä¸è¿‡ä¸å»ºè®®è¿™ä¹Ÿæ“ä½œï¼Œä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œä¸€æ—¦å‡çº§å‡ºé”™ï¼Œæ¢å¤æ•°æ®åº“æœ‰éš¾åº¦ï¼Œé™¤éå‡çº§ä¹‹å‰å·²ç»å¤‡ä»½æ•°æ®åº“ã€‚</p>

<p>æ­£ç¡®å®‰è£…ä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oracle@MMSGDS:/opt/oraInventory/6928169&gt; export OBJECT_MODE=32_64
oracle@MMSGDS:/opt/oraInventory/6928169&gt; /opt/oracle/product/11g/db_1/OPatch/opatch apply
Invoking OPatch 11.1.0.6.0

Oracle Interim Patch Installer version 11.1.0.6.0
Copyright (c) 2007, Oracle Corporation.  All rights reserved.


Oracle Home       : /opt/oracle/product/11g/db_1
Central Inventory : /opt/oraInventory
   from           : /etc/oraInst.loc
OPatch version    : 11.1.0.6.0
OUI version       : 11.1.0.6.0
OUI location      : /opt/oracle/product/11g/db_1/oui
Log file location : /opt/oracle/product/11g/db_1/cfgtoollogs/opatch/opatch2009-04-13_15-50-35PM.log

ApplySession applying interim patch '6928169' to OH '/opt/oracle/product/11g/db_1'

Running prerequisite checks...

OPatch detected non-cluster Oracle Home from the inventory and will patch the local system only.


Please shutdown Oracle instances running out of this ORACLE_HOME on the local system.
(Oracle Home = '/opt/oracle/product/11g/db_1')


Is the local system ready for patching? [y|n]
y
User Responded with: Y
Backing up files and inventory (not for auto-rollback) for the Oracle Home
Backing up files affected by the patch '6928169' for restore. This might take a while...
Backing up files affected by the patch '6928169' for rollback. This might take a while...

Patching component oracle.rdbms, 11.1.0.6.0...
Updating archive file "/opt/oracle/product/11g/db_1/lib/libserver11.a"  with "lib/libserver11.a/jska.o"
Updating archive file "/opt/oracle/product/11g/db_1/lib/libserver11.a"  with "lib/libserver11.a/jskc.o"
Running make for target ioracle
ApplySession adding interim patch '6928169' to inventory

Verifying the update...
Inventory check OK: Patch ID 6928169 is registered in Oracle Home inventory with proper meta-data.
Files check OK: Files from Patch ID 6928169 are present in Oracle Home.

The local system has been patched and can be restarted.


OPatch succeeded.
oracle@MMSGDS:/opt/oraInventory/6928169&gt;
</code></pre></div></div>

<h1 id="ora-01092--oracle-å®ä¾‹ç»ˆæ­¢å¼ºåˆ¶æ–­å¼€è¿æ¥-è§£å†³æ–¹æ¡ˆ">ORA-01092  ORACLE å®ä¾‹ç»ˆæ­¢,å¼ºåˆ¶æ–­å¼€è¿æ¥ è§£å†³æ–¹æ¡ˆ</h1>

<h2 id="è¡¨è±¡">è¡¨è±¡</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SQL&gt; startup 
ORACLE ä¾‹ç¨‹å·²ç»å¯åŠ¨ã€‚ 

Total System Global Area  109051904 bytes 
Fixed Size                  1295272 bytes 
Variable Size              92277848 bytes 
Database Buffers            8388608 bytes 
Redo Buffers                7090176 bytes 
æ•°æ®åº“è£…è½½å®Œæ¯•ã€‚ 
ORA-01092: ORACLE å®ä¾‹ç»ˆæ­¢ã€‚å¼ºåˆ¶æ–­å¼€è¿æ¥
</code></pre></div></div>

<h2 id="åˆ†ææ­¥éª¤">åˆ†ææ­¥éª¤</h2>

<h3 id="alertæ—¥å¿—ä¿¡æ¯ç‰‡æ®µ">alertæ—¥å¿—ä¿¡æ¯ç‰‡æ®µ</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;txt&gt;Errors in file /home/oracle/diag/rdbms/mmsgdb/mmsgdb/trace/mmsgdb_ora_438512.trc:
ORA-00704: å¼•å¯¼ç¨‹åºè¿›ç¨‹å¤±è´¥
ORA-39700: å¿…é¡»ç”¨ UPGRADE é€‰é¡¹æ‰“å¼€æ•°æ®åº“
 &lt;/txt&gt;
</code></pre></div></div>

<h3 id="æŸ¥çœ‹é”™è¯¯ç ä¿¡æ¯">æŸ¥çœ‹é”™è¯¯ç ä¿¡æ¯</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% oerr ora 01092
01092, 00000, "ORACLE instance terminated. Disconnection forced"
// *Cause:  The instance this process was connected to was terminated
//          abnormally, probably via a shutdown abort. This process
//          was forced to disconnect from the instance.
// *Action: Examine the alert log for more details. When the instance has been 
//          restarted, retry action.
%

% oerr ora 39700
39700, 00000, "database must be opened with UPGRADE option"
// *Cause:  A normal database open was attempted, but the database has not 
//          been upgraded to the current server version.
// *Action: Use the UPGRADE option when opening the database to run 
//          catupgrd.sql (for database upgrade), or to run catalog.sql 
//          and catproc.sql (after initial database creation).
</code></pre></div></div>

<h1 id="åŸå› ">åŸå› </h1>

<p>Oracleæ•°æ®åº“å‡çº§åï¼Œæ•°æ®å­—å…¸æ²¡æœ‰å‡çº§ï¼Œæˆ–è€…æ•°æ®å­—å…¸å‡çº§å¤±è´¥</p>

<h1 id="è§£å†³æ–¹æ³•-1">è§£å†³æ–¹æ³•</h1>

<p>oracle dbaç”¨æˆ·æ‰§è¡Œcatupgrd.sqlã€cataproc.sqlå’Œcatlog.sql</p>

<p>1ã€ä»¥startup upgradeæ‰“å¼€æ•°æ®åº“</p>

<p>2ã€ä»¥sysdbaè¿è¡Œâ€˜å‡çº§æ•°æ®å­—å…¸â€™è„šæœ¬å’Œâ€˜åˆ›å»ºæ•°æ®å­—å…¸â€™è„šæœ¬</p>

<p>product/11g/rdbms/admin/catupgrd.sql å’Œ product/11g/rdbms/admin/catalog.sqlå’Œcatproc.sql</p>

<p>å…·ä½“çš„éœ€è¦æ ¹æ®traceæ—¥å¿—ä¸­çš„æç¤ºä¿¡æ¯å»æ‰§è¡Œå“ªä¸ªsqlæ–‡ä»¶ã€‚</p>

<p>ä¾‹å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/opt/oracle/product/11g/rdbms/admin/catupgrd.sql

cat /opt/oracle/product/11g/rdbms/admin/catupgrd.sql | sqlplus / as sysdba
</code></pre></div></div>

<p>å¦‚æœè¿˜ä¸è¡Œï¼Œå†å»åˆ·ä¸€ä¸ªcatproc.sql</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat /opt/oracle/product/11g/rdbms/admin/catproc.sql | sqlplus / as sysdba
</code></pre></div></div>

<p>å¦‚æœè¿˜ä¸è¡Œï¼Œå†å»åˆ·ä¸€ä¸ªcatlog.sql</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> cat /opt/oracle/product/11g/rdbms/admin/catlog.sql | sqlplus / as sysdba
</code></pre></div></div>
:ET