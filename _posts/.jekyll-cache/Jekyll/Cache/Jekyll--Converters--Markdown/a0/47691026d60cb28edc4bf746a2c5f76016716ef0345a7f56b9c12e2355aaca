I"–\<h1 id="æ¦‚è¿°">æ¦‚è¿°</h1>

<p>é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„DELL/HP/IBMä¸‰å®¶çš„æœºæ¶å¼PCçº§æœåŠ¡å™¨é˜µåˆ—å¡æ˜¯ä»LSIçš„å¡OEMå‡ºæ¥çš„ï¼ŒDELLå’ŒIBMä¸¤å®¶çš„é˜µåˆ—å¡åŸç”Ÿç¨‹åº¦è¾ƒé«˜ï¼Œ æ²¡æœ‰åšå¤ªå¤šå°è£…ï¼Œå¯ä»¥ç”¨åŸå‚æä¾›çš„é˜µåˆ—å¡ç®¡ç†å·¥å…·è¿›è¡Œç›‘æ§ï¼›è€ŒHPçš„é˜µåˆ—å¡ä¸€èˆ¬éƒ½åšè¿‡å°è£…äº†ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨è‡ªèº«ç‰¹æœ‰çš„ç®¡ç†å·¥å…·æ¥ç›‘æ§ã€‚
æœ¬æ–‡ä»¥å‡ ç§å¸¸ç”¨çš„é˜µåˆ—å¡ä¸ºä¾‹ï¼Œå±•ç¤ºå…¶é˜µåˆ—å¡åŠç¡¬ç›˜ç›‘æ§çš„æ–¹æ³•ã€‚</p>

<p>DELL SAS 6/iRå¡ï¼Œå…¨ç§°LSI Logic SAS1068Eï¼Œåªæ”¯æŒRAID 0, RAID 1, RAID 1+0, ä¸æ”¯æŒRAID 5ç­‰é«˜çº§RAIDç‰¹æ€§ï¼Œä¸æ”¯æŒé˜µåˆ—å¡ç”µæ± ã€‚
DELL PERC PERC H700å¡ï¼Œå…¨ç§°LSI Logic MegaRAID SAS 2108ï¼Œæ”¯æŒå„ç§RAIDçº§åˆ«åŠé«˜çº§ç‰¹æ€§ï¼Œå¯é€‰é…é˜µåˆ—å¡ç”µæ± ã€‚
DELL PERC H310 Miniå¡ ï¼Œå…¨ç§°LSI Logic / Symbios Logic MegaRAID SAS 2008ï¼Œæ”¯æŒå¸¸è§RAIDçº§åˆ«ï¼Œä¸æ”¯æŒé«˜çº§RAIDç‰¹æ€§ï¼Œä¸æ”¯æŒé˜µåˆ—å¡ç”µæ± ã€‚
IBM ServeRAID M5014 SAS/SATA Controllerå¡ï¼Œå…¨ç§°LSI Logic / Symbios Logic MegaRAID SAS 2108ï¼Œæ”¯æŒå„ç§RAIDçº§åˆ«åŠé«˜çº§ç‰¹æ€§ï¼Œå¯é€‰é…é˜µåˆ—å¡ç”µæ± ã€‚
IBM ServeRAID-MR10i SAS/SATA Controllerå¡ï¼Œå…¨ç§°LSI Logic / Symbios Logic MegaRAID SAS 1078ï¼Œæ”¯æŒå¸¸è§RAIDçº§åˆ«ï¼Œä¸æ”¯æŒé«˜çº§RAIDç‰¹æ€§ï¼Œå¯é€‰é…é˜µåˆ—å¡ç”µæ± ï¼Œè¿™ä¸ªå¡å…¶å®å’ŒDELLçš„PERC 6/iå¡æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åŸºäºLSI MegaRAID SAS 1078åŸºç¡€ä¸ŠOEMå‡ºæ¥çš„ã€‚</p>

<p>ä¸Šé¢æ˜¯å‡ ç§å¸¸è§çš„é˜µåˆ—å¡å‹å·ï¼Œæ›´å¤šçš„å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹å®˜æ–¹çš„æŠ€æœ¯æ‰‹å†Œã€‚
ä¸‹é¢æˆ‘ä»¬è¦ç»§ç»­çš„æ˜¯ï¼Œè¿™äº›é˜µåˆ—å¡ä»¥åŠç¡¬ç›˜å¦‚ä½•ç›‘æ§ï¼Œé˜µåˆ—å¡çš„ç®¡ç†ä¹Ÿè¯·æŸ¥çœ‹å®˜æ–¹æŠ€æœ¯æ‰‹å†Œï¼Œä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒç•´ã€‚
ä¸€èˆ¬åœ°ï¼Œæ”¯æŒRAID 5çš„å¡ï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºé˜µåˆ—å¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨LSIå®˜æ–¹æä¾›çš„MegaCliå·¥å…·æ¥ç®¡ç†ï¼Œè€Œä¸æ”¯æŒRAID 5çš„å¡ï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºSASå¡ï¼Œä½¿ç”¨lsiutilå·¥å…·æ¥ç®¡ç†ã€‚HPçš„æœåŠ¡å™¨ä½¿ç”¨å…¶ç‰¹æœ‰çš„hpacucliå·¥å…·æ¥ç®¡ç†ã€‚</p>

<h1 id="å·¥å…·æ¦‚è¿°">å·¥å…·æ¦‚è¿°</h1>

<h2 id="megacliå·¥å…·"><strong>MegaCliå·¥å…·</strong></h2>

<h3 id="megacli--adpallinfo--aall--æŸ¥çœ‹é˜µåˆ—å¡ä¿¡æ¯">MegaCli -adpallinfo -aall â€” æŸ¥çœ‹é˜µåˆ—å¡ä¿¡æ¯</h3>

<p>-a å‚æ•°æŒ‡å®šé˜µåˆ—å¡çš„ç¼–å·ï¼Œä¸€èˆ¬æœåŠ¡å™¨ä¸Šåªä¼šé…ä¸€ä¸ªé˜µåˆ—å¡ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸æŒ‡å®šä¸º -a0ï¼ˆé˜µåˆ—å¡é€‚é…å™¨ç¼–å·ï¼Œä»0å¼€å§‹ï¼‰ å³å¯ï¼Œä¸»è¦å…³æ³¨ä¸‹é¢å‡ ä¸ªä¿¡æ¯ï¼š</p>

<table>
  <thead>
    <tr>
      <th><strong>çŠ¶æ€å€¼</strong></th>
      <th><strong>å¯¹åº”å«ä¹‰</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Product Name : PERC  H710 Mini</td>
      <td>é˜µåˆ—å¡åç§°</td>
    </tr>
    <tr>
      <td>FW Package Build:  21.2.0-0007</td>
      <td>é˜µåˆ—å¡firmwareç‰ˆæœ¬å·ï¼Œç‰ˆæœ¬å¦‚æœå¤ªä½ï¼Œå»ºè®®å‡çº§ä»¥æé«˜ç¨³å®šæ€§åŠæ€§èƒ½</td>
    </tr>
    <tr>
      <td>BBU : Present</td>
      <td>æ˜¯å¦æœ‰é…BBUç”µæ± </td>
    </tr>
  </tbody>
</table>

<h3 id="megacli--cfgdsply--aall--æŸ¥çœ‹é˜µåˆ—é…ç½®">MegaCli -cfgdsply -aall â€” æŸ¥çœ‹é˜µåˆ—é…ç½®</h3>

<table>
  <thead>
    <tr>
      <th><strong>çŠ¶æ€å€¼</strong></th>
      <th><strong>å¯¹åº”å«ä¹‰</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Memory: 512MB</td>
      <td>é˜µåˆ—å¡cacheå¤§å°ï¼Œ2çš„Næ¬¡æ–¹ï¼Œå¦‚æœä¸æ˜¯ï¼Œè¯´æ˜é˜µåˆ—å¡æœ‰å¼‚å¸¸</td>
    </tr>
    <tr>
      <td>Number of dedicated  Hotspares: 0</td>
      <td>é˜µåˆ—æ˜¯å¦æœ‰ä¸“ç”¨/ç‹¬äº«çƒ­å¤‡ç›˜ï¼ˆå¦‚æœæœ‰å¤šä¸ªé€»è¾‘ç£ç›˜ç»„/disk groupï¼Œåˆ™å¯ä»¥æŒ‡å®šä¸€ä¸ªç¡¬ç›˜ç”¨äºå…¨å±€çƒ­å¤‡ï¼Œé‚£ä¹ˆè¯¥disk groupä¸Šçš„ä¸“ç”¨çƒ­å¤‡ç›˜æ•°é‡ä¸º0ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼‰ï¼Œé™¤äº†RAID  1/RAID 1+0ä¸€èˆ¬ä¸æŒ‡å®šçƒ­å¤‡ç›˜ä»¥å¤–ï¼Œå…¶ä»–å‡ ä¸ªé˜µåˆ—çº§åˆ«å»ºè®®éƒ½è¦æŒ‡å®šçƒ­å¤‡ç›˜</td>
    </tr>
    <tr>
      <td>State : Optimal</td>
      <td>é˜µåˆ—çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯ Optimal å°±è¦å…³æ³¨äº†</td>
    </tr>
    <tr>
      <td>Current Cache  Policy: WriteBack, ReadAheadNone, Direct, Write Cache OK if Bad BBU</td>
      <td>é˜µåˆ—è¯»å†™cacheç­–ç•¥ï¼Œå»ºè®®å†™ç­–ç•¥è®¾ç½®ä¸ºFORCE WBï¼Œæœ€èµ·ç æ˜¯WBï¼Œé¢„è¯»ç­–ç•¥å¯ä»¥å…³æ‰ï¼Œæ„ä¹‰ä¸å¤§ï¼Œå‡ ä¹æ²¡å½±å“</td>
    </tr>
    <tr>
      <td>Disk Cache Policy :  Disabled</td>
      <td>ç¡¬ç›˜cacheç­–ç•¥ï¼Œå»ºè®®å…³é—­ï¼Œé˜²æ­¢æ„å¤–æ—¶æ•°æ®ä¸¢å¤±</td>
    </tr>
    <tr>
      <td>Current Power  Savings Policy: None</td>
      <td>èŠ‚ç”µç­–ç•¥ï¼Œå»ºè®®å…³é—­</td>
    </tr>
    <tr>
      <td>Media Error Count:  0</td>
      <td>ä¸‰ä¸ªé”™è¯¯è®¡æ•°å™¨ï¼Œä»»ä½•ä¸€ä¸ªå€¼å¤§äº100å°±è¦ç«‹åˆ»å¼•èµ·å…³æ³¨ï¼Œå°¤å…¶è¦å…³æ³¨èµ·å¢é•¿é€Ÿåº¦ã€‚1Tä»¥ä¸ŠSATAç›˜ï¼Œè®¡æ•°å€¼ä¸å¤Ÿç²¾ç¡®ï¼Œå¯èƒ½æ‰€æœ‰ç›˜ä¸Šè¯¥å€¼éƒ½ä¼šå¤§äº0ï¼Œä¸€èˆ¬é‡å¯å°±ä¼šé‡æ–°æ¸…0ï¼Œå¦‚æœé‡å¯åè¿˜æ˜¯å¤§äº0çš„è¯ï¼Œèµ¶ç´§æŠ¥ä¿®å§ã€‚SASç›˜çš„è®¡æ•°å€¼åˆ™æ¯”è¾ƒå‡†ç¡®ã€‚</td>
    </tr>
    <tr>
      <td>Other Error Count:  0</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>Predictive Failure  Count: 0</td>
      <td>Â </td>
    </tr>
    <tr>
      <td>Firmware state:  Online, Spun Up</td>
      <td>æŸ¥çœ‹ç¡¬ç›˜çŠ¶æ€ï¼Œå¦‚æœæ˜¯unconfiguredè¡¨ç¤ºè¯¥ç¡¬ç›˜æœªåˆ†é…åŠ å…¥åˆ°é˜µåˆ—ä¸­ï¼›å¦‚æœæ˜¯  unconfigured(bad)è¡¨ç¤ºè¯¥ç›˜ä¸ä½†æ˜¯æœªåˆ†é…ï¼Œè€Œä¸”è¿˜åäº†ï¼Œæ­£æ˜¯â€œå‡ºå¸ˆæœªæ·èº«å…ˆæ­»â€ï¼›å¦‚æœæ˜¯failedï¼Œè¡¨ç¤ºè¯¥ç›˜æ•…éšœæ— æ³•è¯†åˆ«ï¼›å¦‚æœæ˜¯  rebuildingï¼Œè¡¨ç¤ºè¯¥ç›˜æ­£åœ¨é‡å»ºæ•°æ®</td>
    </tr>
  </tbody>
</table>

<h3 id="megacli--adpbbucmd--aall--æŸ¥çœ‹é˜µåˆ—å¡ç”µæ± ä¿¡æ¯">MegaCli -adpbbucmd -aall â€” æŸ¥çœ‹é˜µåˆ—å¡ç”µæ± ä¿¡æ¯</h3>

<table>
  <thead>
    <tr>
      <th><strong>çŠ¶æ€å€¼</strong></th>
      <th><strong>å¯¹åº”å«ä¹‰</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Temperature: 39 C</td>
      <td>æŸ¥çœ‹ç”µæ± æ¸©åº¦ï¼Œå¦‚æœç›¸æ¯”ä¸Šä¸€æ¬¡æŸ¥çœ‹é«˜å‡ºä¸å°‘ï¼Œå°±éœ€è¦å…³æ³¨äº†ï¼Œæˆ–è€…å¯ä»¥æ ¹æ®ç»éªŒè®¾ç½®ä¸€ä¸ªåŸºçº¿å€¼</td>
    </tr>
    <tr>
      <td>Battery State:  Optimal</td>
      <td>ç”µæ± çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯ä¸ºOptimalï¼Œå°±éœ€è¦å…³æ³¨äº†</td>
    </tr>
    <tr>
      <td>Charger Status:  Complete</td>
      <td>ç”µæ± å……æ”¾ç”µçŠ¶æ€</td>
    </tr>
    <tr>
      <td>isSOHGood: Yes</td>
      <td>ç”µæ± çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯ä¸ºYesï¼Œéœ€è¦å…³æ³¨</td>
    </tr>
    <tr>
      <td>Relative State of  Charge: 93 %</td>
      <td>å½“å‰ç”µé‡ï¼Œå½“ç”µé‡ä½äº15%ï¼Œæˆ–è€…ç”µæ± åæ‰æ—¶ï¼Œé»˜è®¤éƒ½ä¼šå°†å†™ç­–ç•¥ä»WBæ”¹æˆWTï¼Œé™¤éè®¾å®šä¸ºFORCE WBç­–ç•¥</td>
    </tr>
    <tr>
      <td>Max Error = 0 %</td>
      <td>ç”µæ± æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯</td>
    </tr>
    <tr>
      <td>Next Learn time:  Tue Oct 14 22:06:50 2014</td>
      <td>ç”µæ± å……æ”¾ç”µæ—¶é—´ï¼Œæ³¨æ„è¿™æ˜¯ç¾å›½æ—¶é—´ã€‚å¦å¤–ï¼Œæ–°çš„é˜µåˆ—å¡ç”µæ± å¾ˆå¤šæ”¹æˆç”µå®¹å¼çš„äº†ï¼Œä¹Ÿå°±ä¸éœ€è¦é‡å¤å……æ”¾ç”µäº†</td>
    </tr>
  </tbody>
</table>

<h2 id="lsiutilå·¥å…·">lsiutilå·¥å…·</h2>

<p>lsiutilæœ‰äº¤äº’å’Œéäº¤äº’ä¸¤ç§æ–¹å¼ï¼Œä½œä¸ºç›‘æ§ï¼Œæˆ‘ä»¬è‚¯å®šé€‰æ‹©éäº¤äº’æ¨¡å¼ã€‚æƒ³è¦ä½¿ç”¨äº¤äº’æ¨¡å¼çš„ï¼Œå¯ä»¥æ ¹æ®éäº¤äº’æ¨¡å¼è‡ªè¡Œç»ƒä¹ ã€‚</p>

<h3 id="lsiutil--p-1--a-201200--æŸ¥çœ‹ç¡¬ç›˜è®¡æ•°å™¨">lsiutil -p 1 -a 20,12,0,0 â€” æŸ¥çœ‹ç¡¬ç›˜è®¡æ•°å™¨</h3>

<p>Invalid DWord Count 2,563 â€” ä»»ä½•ä¸€ä¸ªå€¼å¤§äº0ï¼Œéƒ½éœ€è¦å¼•èµ·å…³æ³¨</p>

<p>Running Disparity Error Count 2,366</p>

<p>Loss of DWord Synch Count 0</p>

<p>Phy Reset Problem Count 0</p>

<h3 id="lsiutil--p-1--a-211000--æŸ¥çœ‹é€»è¾‘å·çŠ¶æ€">lsiutil -p 1 -a 21,1,0,0,0 â€” æŸ¥çœ‹é€»è¾‘å·çŠ¶æ€</h3>

<table>
  <thead>
    <tr>
      <th><strong>çŠ¶æ€å€¼</strong></th>
      <th><strong>å¯¹åº”å«ä¹‰</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Volume State:  optimal, enabled</td>
      <td>é€»è¾‘å·å¥åº·çŠ¶å†µ</td>
    </tr>
    <tr>
      <td>Volume draws from  Hot Spare Pools: 0</td>
      <td>æ˜¯å¦æœ‰çƒ­å¤‡</td>
    </tr>
    <tr>
      <td>Volume Size 139392  MB, 2 Members</td>
      <td>ç”±å‡ å—ç¡¬ç›˜ç»„æˆ</td>
    </tr>
    <tr>
      <td>Primary is PhysDisk  1 (Bus 0 Target 9)</td>
      <td>ç‰©ç†ç¡¬ç›˜1</td>
    </tr>
    <tr>
      <td>Secondary is  PhysDisk 0 (Bus 0 Target 3)</td>
      <td>ç‰©ç†ç¡¬ç›˜0</td>
    </tr>
  </tbody>
</table>

<h3 id="lsiutil--p-1--a-212000--æŸ¥çœ‹ç‰©ç†ç¡¬ç›˜çŠ¶æ€">lsiutil -p 1 -a 21,2,0,0,0 â€” æŸ¥çœ‹ç‰©ç†ç¡¬ç›˜çŠ¶æ€</h3>

<table>
  <thead>
    <tr>
      <th><strong>çŠ¶æ€å€¼</strong></th>
      <th><strong>å¯¹åº”å«ä¹‰</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PhysDisk 0 is Bus 0  Target 3</td>
      <td>ç¼–å·</td>
    </tr>
    <tr>
      <td>PhysDisk State:  online</td>
      <td>çŠ¶æ€</td>
    </tr>
    <tr>
      <td>Error Count 13,  Last Error: Command = 28h, Key = 3, ASC/ASCQ = 11h/00h</td>
      <td>é”™è¯¯è®¡æ•°å™¨ï¼Œå¤§äº0çš„è¯ï¼Œå°±éœ€è¦å¼•èµ·å…³æ³¨</td>
    </tr>
  </tbody>
</table>

<h2 id="hpacucliå·¥å…·">hpacucliå·¥å…·</h2>

<p>hpacucliå·¥å…·æŸ¥çœ‹é˜µåˆ—ã€ç¡¬ç›˜ã€ç”µæ± ä¿¡æ¯ï¼Œå…¶å®å°±åªè¦ä¸€æ¡æŒ‡ä»¤ï¼š</p>

<p><strong>hpacucli ctrl all show config detail â€” æŸ¥çœ‹é˜µåˆ—è¯¦ç»†ä¿¡æ¯ã€é…ç½®</strong></p>

<table>
  <thead>
    <tr>
      <th><strong>çŠ¶æ€å€¼</strong></th>
      <th><strong>å¯¹åº”å«ä¹‰</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Controller Status:  OK</td>
      <td>é˜µåˆ—å¡çŠ¶æ€</td>
    </tr>
    <tr>
      <td>Firmware Version:  1.18</td>
      <td>firmwareç‰ˆæœ¬ï¼Œå¤ªä½äº†å»ºè®®å‡çº§ï¼Œä»¥æé«˜ç¨³å®šæ€§åŠæ€§èƒ½</td>
    </tr>
    <tr>
      <td>Cache Board  Present: True</td>
      <td>æ˜¯å¦é…å¤‡äº†cacheæ¨¡å—</td>
    </tr>
    <tr>
      <td>Cache Status: OK</td>
      <td>cacheæ¨¡å—çŠ¶æ€</td>
    </tr>
    <tr>
      <td>Cache Ratio: 100%  Read / 0% Write</td>
      <td>cacheç­–ç•¥ï¼Œæ­¤å¤„åªæœ‰è¯»cacheï¼Œä¸ç”¨äºå†™cacheï¼Œå› ä¸ºæ²¡æœ‰bbuç”µæ± ï¼Œè§ä¸‹æ–¹ç»“æœ</td>
    </tr>
    <tr>
      <td>Drive Write Cache:  Disabled</td>
      <td>å…³é—­ç£ç›˜cache</td>
    </tr>
    <tr>
      <td>Total Cache Size:  256 MB</td>
      <td>cacheå¤§å°</td>
    </tr>
    <tr>
      <td>Total Cache Memory  Available: 208 MB</td>
      <td>å®é™…å¯ç”¨cacheå¤§å°ï¼Œå’Œç†è®ºcacheå¤§å°ä¸ä¸€æ ·ï¼Œè¯´æ˜cacheæ¨¡å—å¯èƒ½æœ‰é—®é¢˜</td>
    </tr>
    <tr>
      <td>No-Battery Write  Cache: Disabled</td>
      <td>å…³é—­FORCEWBç­–ç•¥</td>
    </tr>
    <tr>
      <td>Battery/Capacitor  Count: 0</td>
      <td>é˜µåˆ—å¡BBUç”µæ± æ•°é‡ä¸º0ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰BBUæ¨¡å—</td>
    </tr>
    <tr>
      <td>Battery/Capacitor  Status: Failed (Replace Batteries)</td>
      <td>é˜µåˆ—å¡BBUç”µæ± çŠ¶æ€ï¼Œè¿™é‡Œæ˜¾ç¤ºæ˜¯é”™è¯¯çŠ¶æ€ï¼Œéœ€è¦åŠæ—¶æ›´æ¢</td>
    </tr>
    <tr>
      <td>Array: A</td>
      <td>ç¬¬ä¸€ä¸ªä¹Œåˆ—é˜µåˆ—ï¼Œç¼–å·ä»Aå¼€å§‹ï¼Œä¾æ¬¡æ˜¯Aã€Bã€C</td>
    </tr>
    <tr>
      <td>Status: OK</td>
      <td>ç‰©ç†é˜µåˆ—çŠ¶æ€</td>
    </tr>
    <tr>
      <td>Logical Drive: 1</td>
      <td>ç¬¬ä¸€ä¸ªé€»è¾‘å·ï¼Œç¼–å·ä»1å¼€å§‹</td>
    </tr>
    <tr>
      <td>Fault Tolerance:  RAID 5</td>
      <td>ç¬¬ä¸€ä¸ªé€»è¾‘å·çš„é˜µåˆ—çº§åˆ«</td>
    </tr>
    <tr>
      <td>Status: OK</td>
      <td>ç¬¬ä¸€ä¸ªé€»è¾‘å·çŠ¶æ€</td>
    </tr>
    <tr>
      <td>Caching: Enabled</td>
      <td>ç¬¬ä¸€ä¸ªé€»è¾‘å·æ˜¯å¦å¯ç”¨äº†cacheç­–ç•¥</td>
    </tr>
    <tr>
      <td>physicaldrive  1I:1:1</td>
      <td>ç¬¬ä¸€å—ç‰©ç†ç¡¬ç›˜ï¼Œç¼–å·ä»1å¼€å§‹</td>
    </tr>
    <tr>
      <td>Status: OK</td>
      <td>ç¬¬ä¸€å—ç‰©ç†ç¡¬ç›˜çŠ¶æ€</td>
    </tr>
    <tr>
      <td>Firmware Revision:  HPDA</td>
      <td>ç¬¬ä¸€å—ç‰©ç†ç¡¬ç›˜firmwareï¼Œå¦‚æœå¤ªä½ï¼Œä¹Ÿéœ€è¦åŠæ—¶å‡çº§ï¼ŒHPçš„ç¡¬ç›˜æ¯ä¸ªæ‰¹æ¬¡éƒ½æœ‰ä¸åŒçš„firmware</td>
    </tr>
  </tbody>
</table>

<h1 id="megacliå®è·µ">Megacliå®è·µ</h1>

<h2 id="æŸ¥çœ‹æœ‰é£é™©çš„ç›˜">æŸ¥çœ‹æœ‰é£é™©çš„ç›˜</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -LDPDinfo -A0 |grep "Device Id" |awk '{print $3}' |xargs -I {} smartctl -a -d megaraid,{} /dev/sdc |grep -Ei "^187|^188|^197|^198|Reallocated_Sector_Ct" | xargs -I{} echo {}</code></p>

<h2 id="æŸ¥çœ‹ç£ç›˜çš„smartä¿¡æ¯">æŸ¥çœ‹ç£ç›˜çš„smartä¿¡æ¯</h2>

<p>å¦‚æœç£ç›˜åœ¨RAIDå¡ä¸Šï¼š</p>

<p>ï¼ˆ1ï¼‰å…ˆè·å–ç£ç›˜çš„device id</p>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 PDList aall</code></p>

<p>è¿™é‡Œçš„è¾“å‡ºï¼Œä¼šæœ‰ESä¿¡æ¯ï¼ŒåŒæ—¶è¿˜ä¼šæœ‰device id</p>

<p>ï¼ˆ2ï¼‰æ ¹æ®device idï¼ŒæŸ¥è¯¢smartä¿¡æ¯</p>

<p><code class="highlighter-rouge">smartctl -a -d megaraid,11 /dev/sdc</code></p>

<p>è¿™é‡Œçš„11å°±æ˜¯ç£ç›˜çš„device idï¼Œå“ªæ€•åé¢çš„/dev/sdcä¸å­˜åœ¨ï¼Œè·å–æ˜¯è¿™é¢—ç£ç›˜ä¸å±äºsdcï¼Œä¹Ÿèƒ½è¾“å‡ºæ­£ç¡®çš„ä¿¡æ¯ï¼Œåªè¦device idæ˜¯æ­£ç¡®çš„å°±è¡Œã€‚</p>

<p>å¦‚æœä¸åœ¨RAIDå¡ä¸Šï¼Œç›´æ¥<code class="highlighter-rouge">smartctl -a /dev/sdc</code></p>

<h2 id="æ‰‹å·¥é…ç½®åˆå§‹åŒ–">æ‰‹å·¥é…ç½®åˆå§‹åŒ–</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/opt/MegaRAID/MegaCli/MegaCli64 -LDInit -start â€“L0 -a0         # å¿«é€Ÿåˆå§‹åŒ–

/opt/MegaRAID/MegaCli/MegaCli64 -LDInit -start -full â€“L0 -a0     # å®Œå…¨åˆå§‹åŒ–

/opt/MegaRAID/MegaCli/MegaCli64 -LDInit -progdsply -L0 -a0      # æ˜¾ç¤ºåˆå§‹åŒ–çš„è¿›åº¦

/opt/MegaRAID/MegaCli/MegaCli64 -LDInit -abort -L0 -a0        # ç»“æŸå®Œå…¨åˆå§‹åŒ–

/opt/MegaRAID/MegaCli/MegaCli64 -LDBI -Abort -LALL -aALL # å¿½ç•¥åˆå§‹åŒ–

/opt/MegaRAID/MegaCli/MegaCli64 -LDBI -ProgDsply -LALL -aALL
</code></pre></div></div>

<h2 id="è®¾ç½®raid-cache">è®¾ç½®RAID cache</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/opt/MegaRAID/MegaCli/MegaCli64 -ldinfo -l1 -a0

/opt/MegaRAID/MegaCli/MegaCli64 -ldsetprop cached -l1 -a0

/opt/MegaRAID/MegaCli/MegaCli64 -ldinfo -l1 -a0

</code></pre></div></div>

<h2 id="æ˜¾ç¤ºrebuidè¿›åº¦">æ˜¾ç¤ºRebuidè¿›åº¦</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -PDRbld -ShowProg -physdrv[20:2] -aALL</code></p>

<h2 id="æŸ¥çœ‹e-s">æŸ¥çœ‹E S</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -PDList -aAll -NoLog | grep -Ei "(enclosure|slot)"</code></p>

<h2 id="æŸ¥çœ‹æ‰€æœ‰ç¡¬ç›˜çš„çŠ¶æ€">æŸ¥çœ‹æ‰€æœ‰ç¡¬ç›˜çš„çŠ¶æ€</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -PDList -aAll -NoLog </code></p>

<p>å¦‚æœæœ‰çƒ­å¤‡ï¼Œåˆ™ Firmware Stateä¼šæ˜¾ç¤ºä¸ºhotspace</p>

<h2 id="æŸ¥çœ‹copybackè¿›åº¦">æŸ¥çœ‹copybackè¿›åº¦</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -PDCpyBk -ShowProg -PhysDrv[33:3] -a0</code></p>

<h2 id="æŸ¥çœ‹æ‰€æœ‰virtual-diskçš„çŠ¶æ€">æŸ¥çœ‹æ‰€æœ‰Virtual Diskçš„çŠ¶æ€</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -LdPdInfo -aAll -NoLog</code></p>

<p>RAID Levelå¯¹åº”å…³ç³»ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RAID Level : Primary-1, Secondary-0, RAID Level Qualifier-0	RAID 1
RAID Level : Primary-0, Secondary-0, RAID Level Qualifier-0	RAID 0
RAID Level : Primary-5, Secondary-0, RAID Level Qualifier-3	RAID 5
RAID Level : Primary-1, Secondary-3, RAID Level Qualifier-0	RAID 10

</code></pre></div></div>

<h2 id="åœ¨çº¿åšraid">åœ¨çº¿åšRaid</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/opt/MegaRAID/MegaCli/MegaCli64 -CfgLdAdd -r0 [0:11] WB NORA Direct CachedBadBBU -strpsz64 -a0 -NoLog
/opt/MegaRAID/MegaCli/MegaCli64 -CfgLdAdd -r5 [12:2,12:3,12:4,12:5,12:6,12:7] WB Direct -a0 
</code></pre></div></div>

<h2 id="è®©ç¡¬ç›˜ledç¯é—ªçƒå®šä½">è®©ç¡¬ç›˜LEDç¯é—ªçƒï¼ˆå®šä½ï¼‰</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    1ã€  MegaCli  -AdpSetProp UseDiskActivityforLocate -1 -a0 
    2ã€  MegaCli  -PdLocate  -start  â€“physdrv[E:S]  -a0  è®©ç¡¬ç›˜LEDç¯é—ªçƒ
    3ã€  MegaCli  -PdLocate  -stopt  â€“physdrv[E:S]  -a0 åœæ‰ç¡¬ç›˜LEDç¯
</code></pre></div></div>

<h2 id="æ¸…é™¤foreignçŠ¶æ€">æ¸…é™¤ForeignçŠ¶æ€</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -CfgForeign -Clear -a0</code></p>

<h2 id="æŸ¥çœ‹raidé˜µåˆ—ä¸­æ‰çº¿çš„ç›˜">æŸ¥çœ‹RAIDé˜µåˆ—ä¸­æ‰çº¿çš„ç›˜</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -pdgetmissing -a0</code></p>

<h2 id="æ›¿æ¢åæ‰çš„æ¨¡å—">æ›¿æ¢åæ‰çš„æ¨¡å—</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -pdreplacemissing -physdrv[12:10] -Array5 -row0 -a0</code></p>

<h2 id="æ‰‹åŠ¨å¼€å¯rebuid">æ‰‹åŠ¨å¼€å¯rebuid</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -pdrbld -start -physdrv[12:10] -a0</code></p>

<h2 id="è®¾ç½®hotspare">è®¾ç½®HotSpare</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/opt/MegaRAID/MegaCli/MegaCli64 -pdhsp -set [-Dedicated [-Array2]] [-EnclAffinity] [-nonRevertible] -PhysDrv[4:11] -a0
/opt/MegaRAID/MegaCli/MegaCli64 -pdhsp -set [-EnclAffinity] [-nonRevertible] -PhysDrv[32ï¼š1}] -a0
</code></pre></div></div>

<h2 id="å…³é—­rebuild">å…³é—­Rebuild</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpAutoRbld -Dsbl -a0</code></p>

<h2 id="è®¾ç½®rebuildçš„é€Ÿç‡">è®¾ç½®rebuildçš„é€Ÿç‡</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpSetProp RebuildRate -30 -a0</code></p>

<h2 id="æŸ¥çœ‹raidç»„æˆå‘˜">æŸ¥çœ‹RAIDç»„æˆå‘˜</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64  -LdPdInfo -aAll</code></p>

<h2 id="å¼ºåˆ¶ä¿®æ”¹raidå¡ç”±write-throughåˆ°write-back-æ–¹æ³•">å¼ºåˆ¶ä¿®æ”¹RAIDå¡ç”±write throughåˆ°write back æ–¹æ³•</h2>

<p><code class="highlighter-rouge">opt/MegaRAID/MegaCli/MegaCli64 -LDSetProp CachedBadBBU -Lall -aALL</code></p>

<p>ä¸€èˆ¬åœ¨æ²¡æœ‰BBUæƒ…å†µä¸‹ï¼Œ è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¿®æ”¹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/opt/MegaRAID/MegaCli/MegaCli64 -ldsetprop WB -lall -aall;

/opt/MegaRAID/MegaCli/MegaCli64 -LDSetProp CachedBadBBU -Lall -aALL;

/opt/MegaRAID/MegaCli/MegaCli64 ldinfo lall aall
</code></pre></div></div>

<h2 id="æŸ¥raidå¡ä¿¡æ¯">æŸ¥raidå¡ä¿¡æ¯</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpAllInfo -aALL</code></p>

<h2 id="æŸ¥çœ‹ç”µæ± ä¿¡æ¯">æŸ¥çœ‹ç”µæ± ä¿¡æ¯</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -aAll</code></p>

<h2 id="æŸ¥çœ‹raidå¡æ—¥å¿—">æŸ¥çœ‹raidå¡æ—¥å¿—</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -FwTermLog -Dsply -aALL</code></p>

<h2 id="æ˜¾ç¤ºé€‚é…å™¨ä¸ªæ•°">æ˜¾ç¤ºé€‚é…å™¨ä¸ªæ•°</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -adpCount</code></p>

<h2 id="æ˜¾ç¤ºé€‚é…å™¨æ—¶é—´">æ˜¾ç¤ºé€‚é…å™¨æ—¶é—´</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpGetTime â€“aALL</code></p>

<h2 id="æ˜¾ç¤ºæ‰€æœ‰é€‚é…å™¨ä¿¡æ¯">æ˜¾ç¤ºæ‰€æœ‰é€‚é…å™¨ä¿¡æ¯</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpAllInfo -aAll</code></p>

<h2 id="æ˜¾ç¤ºæ‰€æœ‰é€»è¾‘ç£ç›˜ç»„ä¿¡æ¯">æ˜¾ç¤ºæ‰€æœ‰é€»è¾‘ç£ç›˜ç»„ä¿¡æ¯</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -LDInfo -LALL -aAll </code></p>

<h2 id="æ˜¾ç¤ºæ‰€æœ‰çš„ç‰©ç†ä¿¡æ¯">æ˜¾ç¤ºæ‰€æœ‰çš„ç‰©ç†ä¿¡æ¯</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -PDList -aAll</code></p>

<h2 id="æŸ¥çœ‹å……ç”µçŠ¶æ€">æŸ¥çœ‹å……ç”µçŠ¶æ€</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuStatus -aALL |grep 'Charger Status'</code></p>

<h2 id="æ˜¾ç¤ºbbuçŠ¶æ€ä¿¡æ¯">æ˜¾ç¤ºBBUçŠ¶æ€ä¿¡æ¯</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuStatus -aALL</code></p>

<h2 id="æ˜¾ç¤ºbbuå®¹é‡ä¿¡æ¯">æ˜¾ç¤ºBBUå®¹é‡ä¿¡æ¯</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuCapacityInfo -aALL</code></p>

<h2 id="æ˜¾ç¤ºbbuè®¾è®¡å‚æ•°">æ˜¾ç¤ºBBUè®¾è®¡å‚æ•°</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuDesignInfo -aALL</code></p>

<h2 id="æ˜¾ç¤ºå½“å‰bbuå±æ€§">æ˜¾ç¤ºå½“å‰BBUå±æ€§</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpBbuCmd -GetBbuProperties -aALL</code></p>

<h2 id="æ˜¾ç¤ºraidå¡å‹å·raidè®¾ç½®diskç›¸å…³ä¿¡æ¯">æ˜¾ç¤ºRaidå¡å‹å·ï¼ŒRaidè®¾ç½®ï¼ŒDiskç›¸å…³ä¿¡æ¯</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64-cfgdsply -aALL</code></p>

<h2 id="ç£ç›˜çŠ¶æ€çš„å˜åŒ–ä»æ‹”ç›˜åˆ°æ’ç›˜çš„è¿‡ç¨‹ä¸­">ç£ç›˜çŠ¶æ€çš„å˜åŒ–ï¼Œä»æ‹”ç›˜ï¼Œåˆ°æ’ç›˜çš„è¿‡ç¨‹ä¸­</h2>

<p>Device             : Normal â€“&gt; Damage â€“&gt; Rebuild â€“&gt; Normal</p>

<p>Virtual Drive      : Optimal â€“&gt; Degraded â€“&gt; Degraded â€“&gt; Optimal</p>

<p>Physical Drive     : Online â€“&gt; Failed Unconfigured â€“&gt; Rebuild â€“&gt; Online</p>

<h2 id="æŸ¥çœ‹ç‰©ç†ç£ç›˜çŠ¶æ€">æŸ¥çœ‹ç‰©ç†ç£ç›˜çŠ¶æ€</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -PDRbld -ShowProg -PhysDrv [Enclosure Device ID:Slot Number] -a0</code></p>

<p>Rebuild ä¸­çš„ç‰©ç†ç£ç›˜çŠ¶æ€ä¸­ä¼šæ˜¾ç¤ºï¼šâ€Firmware state: Rebuildâ€</p>

<h2 id="ä»¥æ–‡æœ¬è¿›åº¦æ¡æ ·å¼æ˜¾ç¤º-rebuild-è¿›åº¦">ä»¥æ–‡æœ¬è¿›åº¦æ¡æ ·å¼æ˜¾ç¤º Rebuild è¿›åº¦</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64-pdrbld -progdsply -physdrv[E:S] -aALL</code></p>

<p>å±å¹•æ˜¾ç¤ºç±»ä¼¼ä¸‹é¢çš„å†…å®¹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rebuild progress of physical drives...
Enclosure:Slot         Percent Complete           Time Elps
     032 :05   #######################87 %################*******  01:59:07

</code></pre></div></div>

<h2 id="æŸ¥çœ‹-raid-å¡-rebuild-å‚æ•°">æŸ¥çœ‹ RAID å¡ Rebuild å‚æ•°</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64-AdpAllinfo -aALL | grep -i rebuild</code></p>

<p>è¿”å›ç»“æœç±»ä¼¼ä¸‹é¢è¿™æ ·</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rebuild Rate                             : 30%
Auto Rebuild                             : Enabled
Rebuild Rate                             : Yes
Force Rebuild                            : Yes
</code></pre></div></div>

<h2 id="è®¾ç½®-raid-å¡-rebuild-æ¯”ä¾‹ä¸º60">è®¾ç½® RAID å¡ Rebuild æ¯”ä¾‹ä¸º60%</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64-AdpSetProp { RebuildRate -60} -aALL</code></p>

<h2 id="åˆ é™¤å…¨å±€çƒ­å¤‡">åˆ é™¤å…¨å±€çƒ­å¤‡</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64-PDHSP -Rmv -PhysDrv[E:S] -a0</code></p>

<h2 id="å°†ç‰©ç†ç›˜ä¸‹çº¿å’Œä¸Šçº¿">å°†ç‰©ç†ç›˜ä¸‹çº¿å’Œä¸Šçº¿</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -PDOffline/Online -PhysDrv [E:S] -a0</code></p>

<h2 id="åœ¨çº¿æ·»åŠ ç£ç›˜">åœ¨çº¿æ·»åŠ ç£ç›˜</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64-LDRecon -Start -r5 -Add -PhysDrv[E:S] -L1 -a0</code></p>

<h2 id="åˆ é™¤é˜µåˆ—">åˆ é™¤é˜µåˆ—</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -CfgLdDel -L1 -a0</code></p>

<h2 id="æŸ¥çœ‹ç£ç›˜ç¼“å­˜ç­–ç•¥">æŸ¥çœ‹ç£ç›˜ç¼“å­˜ç­–ç•¥</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64-LDGetProp -DskCache -LALL -aALL</code></p>

<p>or</p>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -LDGetProp -Cache -LALL -aALL</code></p>

<h2 id="æŸ¥çœ‹raidå¡event-log">æŸ¥çœ‹raidå¡event log</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpEventLog -GetEvents -f event.log -A0</code></p>

<h2 id="æŸ¥çœ‹megacliçš„log">æŸ¥çœ‹Megacliçš„log</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -fwtermlog -dsply -aALL</code> ï¼Œå…³æ³¨é‡Œé¢çš„error/fail/warnç­‰å¤šä¸ªå…³é”®å­—</p>

<h2 id="æŸ¥çœ‹raidå¡æ—¶é—´">æŸ¥çœ‹raidå¡æ—¶é—´</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -AdpGetTime -A0 ; date</code></p>

<h2 id="stop-ä¸€è‡´æ€§æ£€æŸ¥">Stop ä¸€è‡´æ€§æ£€æŸ¥</h2>

<p><code class="highlighter-rouge">/opt/MegaRAID/MegaCli/MegaCli64 -LDCC -stop -lall -aall</code></p>

<h1 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h1>

<p><code class="highlighter-rouge">https://kamaok.org.ua/?p=2507</code></p>

:ET