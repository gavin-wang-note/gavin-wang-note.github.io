I"ŠŠ<h1 id="ipè§„åˆ’">IPè§„åˆ’</h1>

<table>
  <thead>
    <tr>
      <th>åˆ†ç±»</th>
      <th>IP</th>
      <th>netmask</th>
      <th>gateway</th>
      <th>è¯´æ˜</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Â </td>
      <td>172.17.75.236</td>
      <td>255.255.252.0</td>
      <td>172.17.75.254</td>
      <td>cobbler manageråœ°å€</td>
    </tr>
    <tr>
      <td>cobbler</td>
      <td>172.10.0.1</td>
      <td>255.255.255.0</td>
      <td>172.10.0.255</td>
      <td>cobbler dhcp serveråœ°å€(domain-name-servers)ï¼Œ<strong>å¯¹åº”ESXi PXEç½‘ç»œ</strong></td>
    </tr>
    <tr>
      <td>Â </td>
      <td>10.16.172.236</td>
      <td>255.255.255.0</td>
      <td>Â </td>
      <td>cobbleræŒ‚è½½å¤–éƒ¨ISOé•œåƒåœ°å€ï¼Œä¹Ÿå¯ä½¿ç”¨cobbler manageråœ°å€</td>
    </tr>
    <tr>
      <td>DHCP</td>
      <td>172.10.0.0</td>
      <td>Â </td>
      <td>Â </td>
      <td>DHCP serverçš„subnet</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>Â </td>
      <td>255.255.255.0</td>
      <td>Â </td>
      <td>DHCP option routers</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>172.10.0.254</td>
      <td>DHCP option subnet-mask</td>
    </tr>
    <tr>
      <td>Â </td>
      <td>172.10.0.100~172.10.0.200</td>
      <td>Â </td>
      <td>Â </td>
      <td>DHCP range dynamic-bootp</td>
    </tr>
  </tbody>
</table>

<p>è¯´æ˜ï¼š</p>

<p>â€‹    cobblerå¿…é¡»è¦æœ‰PXEç½‘ç»œï¼ŒåŒæ—¶æ¨èOSåˆ†åŒºç©ºé—´è¦&gt;= 300G,æˆ–é¢å¤–å¢åŠ ä¸€ä¸ªåˆ†åŒºç”¨äºISOæŒ‚è½½ä½¿ç”¨ã€‚åªæ‰€ä»¥å ç”¨ç©ºé—´ï¼Œæ›´å¤šæ˜¯å› ä¸ºcobbler repo syncåå°†é•œåƒä¸­æ–‡ä»¶å¤åˆ¶ä¸€ä»½å‡ºæ¥ï¼Œå»ºè®®åˆ é™¤repoï¼Œå¹¶å¢åŠ å®šæ—¶ä»»åŠ¡æ¸…ç†å­˜åœ¨çš„repoï¼Œä»¥æœŸä¿è¯ç©ºé—´çš„å……è¶³ã€‚</p>

<h1 id="éƒ¨ç½²cobbler">éƒ¨ç½²cobbler</h1>

<h2 id="æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯">æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# cat /etc/redhat-release
CentOS Linux release 7.6.1810 (Core) 
[root@cobbler-236 ~]# uname -r
3.10.0-957.el7.x86_64
[root@cobbler-236 ~]# hostname -I
172.17.75.236 
[root@cobbler-236 ~]# 
</code></pre></div></div>

<h2 id="é…ç½®ip">é…ç½®IP</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 network-scripts]# pwd
/etc/sysconfig/network-scripts
[root@cobbler-236 network-scripts]# ls ifcfg-ens*
ifcfg-ens160  ifcfg-ens192
[root@cobbler-236 network-scripts]# cat ifcfg-ens160 
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=static
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens160
UUID=fad33a53-af8c-48dd-9cb9-46565a8cac98
DEVICE=ens160
ONBOOT=yes
IPADDR0=172.17.75.236
PREFIX=24
DNS1=8.8.8.8
DNS2=114.114.114.114
GATEWAY0=172.17.75.254
[root@cobbler-236 network-scripts]# cat ifcfg-ens192 
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens192
DEVICE=ens192
ONBOOT=yes
IPADDR=172.10.0.1
PREFIX=24
[root@cobbler-236 network-scripts]# 
</code></pre></div></div>

<p>é‡å¯ç½‘ç»œæœåŠ¡ï¼Œå¹¶æŸ¥çœ‹ipåœ°å€:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 network-scripts]# systemctl restart network.service
[root@cobbler-236 network-scripts]# ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:50:56:9e:8c:1e brd ff:ff:ff:ff:ff:ff
    inet 172.17.75.236/16 brd 172.17.255.255 scope global noprefixroute ens160
       valid_lft forever preferred_lft forever
    inet6 fe80::4d94:54dc:9eb2:2864/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
3: ens192: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:50:56:9e:07:2b brd ff:ff:ff:ff:ff:ff
    inet 172.10.0.1/24 brd 172.10.0.255 scope global noprefixroute ens192
       valid_lft forever preferred_lft forever
    inet6 fe80::ddb7:d654:f5be:b66a/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
[root@cobbler-236 network-scripts]# 
</code></pre></div></div>

<h2 id="é…ç½®-ssh">é…ç½® ssh</h2>

<p>é»˜è®¤ ssh_config å¯ç”¨äº† DNS è§£æï¼Œå¯¼è‡´æ¯æ¬¡è¿œç¨‹ ssh æ—¶éƒ½ç‰¹åˆ«æ…¢</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# sed -i 's%#UseDNS yes%UseDNS no%' /etc/ssh/sshd_config
[root@cobbler-236 ~]# service sshd restart
</code></pre></div></div>

<h2 id="å…³é—­é˜²ç«å¢™selinuxç­‰">å…³é—­é˜²ç«å¢™ã€selinuxç­‰</h2>

<h3 id="å…³é—­é˜²ç«å¢™">å…³é—­é˜²ç«å¢™</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl stop firewalld.service        # åœæ­¢firewall
systemctl disable firewalld.service     # ç¦æ­¢firewallå¼€æœºå¯åŠ¨
</code></pre></div></div>

<h3 id="å…³é—­selinux">å…³é—­SELinux</h3>

<p>ç¼–è¾‘/etc/selinux/configæ–‡ä»¶ï¼Œå°†SELINUXçš„å€¼è®¾ç½®ä¸ºdisabledï¼Œä¸‹æ¬¡å¼€æœºSELinuxå°±ä¸ä¼šå¯åŠ¨äº†ã€‚æ¥ç€å†æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤,æ³¨æ„ setenforce åé¢æœ‰ç©ºæ ¼:</p>

<p><code class="highlighter-rouge">setenforce 0</code></p>

<p>æŸ¥çœ‹SELinuxçŠ¶æ€,æ‰§è¡Œgetenforceå‘½ä»¤, Disabled è¡¨ç¤ºå·²ç»å…³é—­äº†ã€‚</p>

<h2 id="å®‰è£…wget">å®‰è£…wget</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y install wget
</code></pre></div></div>

<h2 id="å®‰è£…epelæº">å®‰è£…epelæº</h2>

<p>cobblerç”±epelæºæä¾›ï¼Œæ‰€ä»¥éœ€è¦äº‹å…ˆé…ç½®epelçš„yumæºã€‚</p>

<p><code class="highlighter-rouge">wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</code></p>

<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯é˜¿é‡Œçš„epelæºï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ <code class="highlighter-rouge">yum install epel-release</code></p>

<h2 id="æ–°å¢ä¸€ä¸ªåˆ†åŒºå¢åŠ isoè‡ªåŠ¨æŒ‚è½½">æ–°å¢ä¸€ä¸ªåˆ†åŒºï¼Œå¢åŠ ISOè‡ªåŠ¨æŒ‚è½½</h2>

<p>æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªç©ºçš„ç›®å½•/var/www/cobblerï¼Œæ­¤æ—¶æ–°å¢ä¸€ä¸ª300~500Gå¤§å°çš„åˆ†åŒºï¼ˆå‡å¦‚åˆ†åŒºæ˜¯sdbï¼Œä»¥æ­¤ä¸ºç¤ºä¾‹ï¼‰ï¼Œæ‰§è¡Œ <code class="highlighter-rouge">msfs -t xfs /dev/sdb</code>ï¼Œå¹¶å°†è¯¥åˆ†åŒºæŒ‚è½½åˆ°è¿™ä¸ªç›®å½•:</p>

<p>1) <code class="highlighter-rouge">mkfs.xfs /dev/sdb</code></p>

<p>2) <code class="highlighter-rouge">mount /dev/sdb /var/www/cobbler/</code></p>

<p>3) <code class="highlighter-rouge">ä½¿ç”¨blkidè·å–uuid</code></p>

<p>ç”¨äº/etc/fstabæ–‡ä»¶çš„ç¼–è¾‘,æ¯”å¦‚ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# blkid 
/dev/mapper/centos-root: UUID="f43b464c-78b9-4877-9c9b-72c5f01eb69d" TYPE="xfs" 
/dev/sda2: UUID="bwMXPE-QMkC-gbwC-vCxn-q7W0-HCss-RBsmtK" TYPE="LVM2_member" 
/dev/sdb: UUID="eaa27ae0-63bd-4d9e-a683-35d785269848" TYPE="xfs" 
/dev/sda1: UUID="5d3aa690-2d88-45c3-b647-1efe372980b6" TYPE="xfs" 
/dev/mapper/centos-swap: UUID="cfcd9e7b-2b02-45fc-a097-21c3f871ea92" TYPE="swap" 
/dev/mapper/centos-home: UUID="82402837-18a5-471f-87f9-d50eb73914df" TYPE="xfs" 
[root@cobbler-236 ~]# 
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10.16.172.101:/vol/share/Builds/buildwindow/ /mnt/buildwindow nfs rsize=8192,wsize=8192,timeo=14,intr
UUID=eaa27ae0-63bd-4d9e-a683-35d785269848  /var/www/cobbler        xfs     defaults        0 2
</code></pre></div></div>

<h2 id="å®‰è£…cobbler">å®‰è£…cobbler</h2>

<p><code class="highlighter-rouge">yum -y install cobbler cobbler-web pykickstart debmirror httpd dhcp tftp-server xinetd syslinux</code></p>

<h2 id="å¯åŠ¨ç›¸å…³æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯">å¯åŠ¨ç›¸å…³æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl start httpd
systemctl enable httpd
systemctl start cobblerd
systemctl enable cobblerd
systemctl start rsyncd
systemctl enable rsyncd
# systemctl enable dhcpd
</code></pre></div></div>

<h2 id="æ£€æŸ¥cobbleré…ç½®">æ£€æŸ¥cobbleré…ç½®</h2>

<p>é€šè¿‡cobblerè‡ªå¸¦çš„å‘½ä»¤æ£€æŸ¥ï¼Œè€Œåé€ä¸€æŒ‰æç¤ºè§£å†³ã€‚</p>

<p><code class="highlighter-rouge">cobbler check</code></p>

<p>å‡ºç°å¦‚ä¸‹æç¤ºä¿¡æ¯ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# cobbler check
The following are potential configuration items that you may want to fix:

1 : The 'server' field in /etc/cobbler/settings must be set to something other than localhost, or kickstarting features will not work.  This should be a resolvable hostname or IP for the boot server as reachable by all machines that will use it.
2 : For PXE to be functional, the 'next_server' field in /etc/cobbler/settings must be set to something other than 127.0.0.1, and should match the IP of the boot server on the PXE network.
3 : SELinux is enabled. Please review the following wiki page for details on ensuring cobbler works correctly in your SELinux environment:
    https://github.com/cobbler/cobbler/wiki/Selinux
4 : change 'disable' to 'no' in /etc/xinetd.d/tftp
5 : Some network boot-loaders are missing from /var/lib/cobbler/loaders, you may run 'cobbler get-loaders' to download them, or, if you only want to handle x86/x86_64 netbooting, you may ensure that you have installed a *recent* version of the syslinux package installed and can ignore this message entirely.  Files in this directory, should you want to support all architectures, should include pxelinux.0, menu.c32, elilo.efi, and yaboot. The 'cobbler get-loaders' command is the easiest way to resolve these requirements.
6 : comment out 'dists' on /etc/debmirror.conf for proper debian support
7 : comment out 'arches' on /etc/debmirror.conf for proper debian support
8 : The default password used by the sample templates for newly installed machines (default_password_crypted in /etc/cobbler/settings) is still set to 'cobbler' and should be changed, try: "openssl passwd -1 -salt 'random-phrase-here' 'your-password-here'" to generate new one
9 : fencing tools were not found, and are required to use the (optional) power management features. install cman or fence-agents to use them

Restart cobblerd and then run 'cobbler sync' to apply changes.
[root@cobbler-236 ~]# 
</code></pre></div></div>

<p>å¦‚ä¸Šå„é—®é¢˜çš„è§£å†³æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<p>1ã€ä¿®æ”¹/etc/cobbler/settingsæ–‡ä»¶ï¼Œå°†é»˜è®¤serverçš„127.0.0.1æ›¿æ¢ä¸ºæœ¬æœºIPåœ°å€(cobbleråœ°å€)</p>

<p><code class="highlighter-rouge">sed -i 's#^server: 127.0.0.1#server: 172.10.0.1#' /etc/cobbler/settings</code></p>

<p>2ã€ä¿®æ”¹/etc/cobbler/settingsæ–‡ä»¶ï¼Œå°†é»˜è®¤next_serverçš„127.0.0.1æ›¿æ¢ä¸ºæœ¬æœºIPåœ°å€</p>

<p><code class="highlighter-rouge">sed -i 's#^next_server: 127.0.0.1#next_server: 172.10.0.1#' /etc/cobbler/settings</code></p>

<p>3ã€å°†/etc/xinetd.d/tftpä¸­disableæ”¹ä¸ºno</p>

<p><code class="highlighter-rouge">disable = no</code></p>

<p>4ã€æ‰§è¡Œ <code class="highlighter-rouge">cobbler get-loaders</code> å‘½ä»¤å³å¯</p>

<p>å¯èƒ½ä¼šå‡ºç°timeoutï¼Œæ²¡å…³ç³»ï¼Œå¤šæ‰§è¡Œå‡ æ¬¡ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ï¼ˆä¼šå‡ºç°TASK COMPLETEï¼‰ã€‚</p>

<p>5ã€æ³¨é‡Š/etc/debmirror.confæ–‡ä»¶ä¸­çš„@dists=â€sidâ€;ä¸€è¡Œ</p>

<p><code class="highlighter-rouge">sed -i 's/@dists="sid";/#@dists="sid";/' /etc/debmirror.conf</code></p>

<p>6ã€æ³¨é‡Š/etc/debmirror.confæ–‡ä»¶ä¸­çš„@arches=â€i386â€;ä¸€è¡Œ</p>

<p><code class="highlighter-rouge">sed -i 's/@arches="i386";/#@arches="i386";/' /etc/debmirror.conf</code></p>

<p>7ã€ é˜²æ­¢å¾ªç¯è£…ç³»ç»Ÿï¼Œé€‚ç”¨äºæœåŠ¡å™¨ç¬¬ä¸€å¯åŠ¨é¡¹æ˜¯PXEå¯åŠ¨ã€‚
<code class="highlighter-rouge">sed -i 's/pxe_just_once: 0/pxe_just_once: 1/' /etc/cobbler/settings</code></p>

<p>8ã€è®¾ç½®æ–°ç³»ç»Ÿé»˜è®¤çš„rootå¯†ç </p>

<p>æ‰§è¡Œ  <code class="highlighter-rouge">openssl passwd -1 -salt $(openssl rand -hex 4)</code> ç”Ÿæˆå¯†ç ï¼Œå¹¶ç”¨å…¶æ›¿æ¢/etc/cobbler/settingsæ–‡ä»¶ä¸­default_password_cryptedå‚æ•°çš„å€¼ï¼›</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# openssl passwd -1 -salt $(openssl rand -hex 4)
Password: 
$1$2a25cee5$NK/O/uGlcl3tue7mc/Iy5/
[root@cobbler-236 ~]# 
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vi /etc/cobbler/settings

default_password_crypted: "$1$2a25cee5$NK/O/uGlcl3tue7mc/Iy5/"
</code></pre></div></div>

<h2 id="å®‰è£…å…¶ä»–åŒ…">å®‰è£…å…¶ä»–åŒ…</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y install fence-agents
yum -y install perl-JSON-PP
</code></pre></div></div>

<h2 id="é‡å¯cobblerdå¹¶åŒæ­¥æ£€æŸ¥">é‡å¯cobblerdå¹¶åŒæ­¥æ£€æŸ¥</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl restart cobblerd
cobbler sync
cobbler check
</code></pre></div></div>

<p>å¦‚æœå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¡¨æ˜check okï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# cobbler check
No configuration problems found.  All systems go.
[root@cobbler-236 ~]# 
</code></pre></div></div>

<h2 id="é€šè¿‡cobbleræ¥ç®¡ç†dhcp">é€šè¿‡cobbleræ¥ç®¡ç†dhcp</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# sed -i 's#manage_dhcp: 0#manage_dhcp: 1#' /etc/cobbler/settings
</code></pre></div></div>

<h2 id="é…ç½®dhcpæœåŠ¡">é…ç½®DHCPæœåŠ¡</h2>

<p><code class="highlighter-rouge">vi /etc/cobbler/dhcp.template</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>subnet 172.10.0.0 netmask 255.255.255.0 {
     option routers             172.10.0.254;
     option domain-name-servers 172.10.0.1;
     option subnet-mask         255.255.255.0;
     range dynamic-bootp        172.10.0.100 172.10.0.200;
     default-lease-time         21600;
     max-lease-time             43200;
     next-server                $next_server;
     class "pxeclients" {
          match if substring (option vendor-class-identifier, 0, 9) = "PXEClient";
          if option pxe-system-type = 00:02 {
                  filename "ia64/elilo.efi";
          } else if option pxe-system-type = 00:06 {
                  filename "grub/grub-x86.efi";
          } else if option pxe-system-type = 00:07 {
                  filename "grub/grub-x86_64.efi";
          } else if option pxe-system-type = 00:09 {
                  filename "grub/grub-x86_64.efi";
          } else {
                  filename "pxelinux.0";
          }
     }

}
</code></pre></div></div>

<p>ç„¶åé‡å¯cobbleræœåŠ¡å¹¶åŒæ­¥é…ç½®</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl restart cobblerd
cobbler sync
</code></pre></div></div>

<h1 id="éƒ¨ç½²nginx">éƒ¨ç½²Nginx</h1>

<h2 id="å®‰è£…nginx">å®‰è£…Nginx</h2>

<p><code class="highlighter-rouge">yum -y install nginx</code></p>

<p>å®‰è£…çš„ç‰ˆæœ¬ä¸ºï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# nginx -v
nginx version: nginx/1.16.1
[root@cobbler-236 ~]# 
</code></pre></div></div>

<p>å¦‚æœè¦å¸è½½çš„è¯ï¼Œæ‰§è¡Œ <code class="highlighter-rouge">yum -y remove nginx  </code></p>

<h2 id="è®¾ç½®å¼€æœºå¯åŠ¨">è®¾ç½®å¼€æœºå¯åŠ¨</h2>

<p><code class="highlighter-rouge">systemctl enable nginx</code></p>

<p>å…¶ä»–æŒ‡ä»¤å‚è€ƒå¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service nginx start      # å¯åŠ¨ nginx æœåŠ¡
service nginx stop       # åœæ­¢ nginx æœåŠ¡
service nginx restart    # é‡å¯ nginx æœåŠ¡
service nginx reload     # é‡æ–°åŠ è½½é…ç½®ï¼Œä¸€èˆ¬æ˜¯åœ¨ä¿®æ”¹è¿‡ nginx é…ç½®æ–‡ä»¶æ—¶ä½¿ç”¨ã€‚
</code></pre></div></div>

<h2 id="é…ç½®nginx">é…ç½®Nginx</h2>

<p>ç”±äºNginxé»˜è®¤ä½¿ç”¨80ç«¯å£ï¼Œè€Œ80ç«¯å£åˆè¢«cobbler webå ç”¨ï¼Œéœ€è¦ä¿®æ”¹Nginxçš„é»˜è®¤ç«¯å£ï¼Œä»¥åŠNginxçš„å…¶ä»–é…ç½®ï¼Œä¸‹æ–‡ç»“æŸä¿®æ”¹/etc/nginx/nginx.confã€‚</p>

<h3 id="1-ä¿®æ”¹nginxå¯ç”¨è´¦å·">1. ä¿®æ”¹Nginxå¯ç”¨è´¦å·</h3>

<p>é»˜è®¤æ˜¯nginxè¿™ä¸ªè´¦å·å¯ç”¨nginxæœåŠ¡çš„ï¼Œéœ€è¦æ”¹æˆroot</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user root;
</code></pre></div></div>

<h3 id="2-ä¿®æ”¹é»˜è®¤ç«¯å£">2. ä¿®æ”¹é»˜è®¤ç«¯å£</h3>

<p>ä¸‹é¢æ”¹æˆ81ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        listen       81 default_server;
        listen       [::]:81 default_server;
</code></pre></div></div>

<p>â€‹</p>

<h3 id="3-æŒ‡å®šlocation">3. æŒ‡å®šlocation</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        location / {
            root /var/www/html;
            autoindex on;
        }
</code></pre></div></div>

<p>åŒæ—¶ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /var/www
rm -rf html
ln -s /var/lib/tftpboot /var/www/html
</code></pre></div></div>

<p>/etc/nginx/nginx.confå†…å®¹å‚è€ƒå¦‚ä¸‹ï¼š</p>

<p><img class="shadow" src="/img/in-post/cobbler/image-20200927163055922.png" width="1200" /></p>

<h3 id="4-autoinitshé…ç½®æ–‡ä»¶çš„å­˜æ”¾">4. autoinit.shé…ç½®æ–‡ä»¶çš„å­˜æ”¾</h3>

<p>å°†autoinit.shè„šæœ¬ï¼Œå¤åˆ¶åˆ° /var/lib/tftpboot/netconf/ç›®å½•ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp autoinit.sh /var/lib/tftpboot/netconf/
</code></pre></div></div>

<h1 id="æ‰‹åŠ¨å®‰è£…å®è·µ">æ‰‹åŠ¨å®‰è£…å®è·µ</h1>

<h2 id="å®‰è£…centos7">å®‰è£…CentOS7</h2>

<h3 id="1-å¯¼å…¥é•œåƒ">1. å¯¼å…¥é•œåƒï¼š</h3>

<p>ä»¥å®˜æ–¹CentOSä¸ºç¤ºä¾‹ï¼Œå…ˆåœ¨cobblerå¯¹åº”vmä¸ŠæŒ‚è½½isoï¼Œç„¶åsshåˆ°åç«¯æ‰§è¡Œï¼š</p>

<p><code class="highlighter-rouge">mount /dev/cdrom  /mnt/</code></p>

<p>åœ¨å¯¼å…¥æœŸé—´ï¼Œå¯ä»¥åœ¨åç«¯æŸ¥çœ‹å¯¼å…¥è¿›ç¨‹ä¿¡æ¯ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# ps -ef |grep rsync
root      4661     1  0 Sep13 ?        00:00:00 /usr/bin/rsync --daemon --no-detach
root     14477 12531 21 23:09 ?        00:00:02 rsync -a /mnt/ /var/www/cobbler/ks_mirror/centos-7-x86_64 --progress
root     14478 14477  0 23:09 ?        00:00:00 rsync -a /mnt/ /var/www/cobbler/ks_mirror/centos-7-x86_64 --progress
root     14479 14478 35 23:09 ?        00:00:04 rsync -a /mnt/ /var/www/cobbler/ks_mirror/centos-7-x86_64 --progress
root     14497 12822  0 23:10 pts/3    00:00:00 grep --color=auto rsync
[root@cobbler-236 ~]# 
</code></pre></div></div>

<p>å¦‚æœrsyncè¿›ç¨‹æ¶ˆå¤±ï¼Œè¡¨æ˜importç»“æŸï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost network-scripts]# ps -ef | grep rsync
root      4854     1  0 Sep16 ?        00:00:00 /usr/bin/rsync --daemon --no-detach
root     11284  9927  0 11:12 pts/0    00:00:00 grep --color=auto rsync
[root@localhost network-scripts]# 
</code></pre></div></div>

<p>å¯¼å…¥å®Œæˆåç”Ÿæˆçš„æ–‡ä»¶å¤¹</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ks_mirror]# pwd
/var/www/cobbler/ks_mirror
[root@cobbler-236 ks_mirror]# ll
total 0
drwxrwxr-x  8 root root 254 Nov 26  2018 centos-7-x86_64
drwxr-xr-x. 2 root root  62 Sep 17 11:12 config
[root@cobbler-236 ks_mirror]# 
</code></pre></div></div>

<h3 id="2-ç¼–è¾‘kickstartæ–‡ä»¶">2. ç¼–è¾‘kickstartæ–‡ä»¶</h3>

<p>vi /var/lib/cobbler/kickstarts/CentOS-7-x86_64.cfg</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Centos7
# This kickstart file should only be used with EL &gt; 5 and/or Fedora &gt; 7.
# For older versions please use the sample.ks kickstart file.
 
#platform=x86, AMD64, or Intel EM64T
# System authorization information
auth --useshadow --passalgo=sha512
# System bootloader configuration
bootloader --location=mbr
# Partition clearing information
clearpart --all --initlabel
# Use text mode install
text
# Firewall configuration
firewall --disable
# Run the Setup Agent on first boot
firstboot --disable
ignoredisk --only-use=sda
# System keyboard
keyboard us
# System language
lang en_US
# Use network installation
url --url=$tree
# If any cobbler repo definitions were referenced in the kickstart profile, include them here.
$yum_repo_stanza
# Network information
$SNIPPET('network_config')
# Reboot after installation
reboot
 
#Root password
rootpw --iscrypted $default_password_crypted
# SELinux configuration
selinux --disabled
# Do not configure the X Window System
skipx
# System timezone
timezone Asia/Shanghai
# Install OS instead of upgrade
install
# Clear the Master Boot Record
zerombr
# Allow anaconda to partition the system as needed
part /boot --fstype="xfs" --size=300 --ondisk=sda
part swap --fstype="swap" --size=2048 --ondisk=sda
part / --fstype="xfs" --grow --size=1 --ondisk=sda
 
%pre
 
$SNIPPET('log_ks_pre')
$SNIPPET('kickstart_start')
$SNIPPET('pre_install_network_config')
# Enable installation monitoring
$SNIPPET('pre_anamon')
%end
 
 
%packages
 
@^minimal
@core
kexec-tools
%end
 
 
%post
 
systemctl disable postfix.service
%end
</code></pre></div></div>

<h3 id="3-ä¿®æ”¹kickstartæ–‡ä»¶ä¸ºè‡ªå®šä¹‰çš„centos-7-x86_64cfg">3. ä¿®æ”¹kickstartæ–‡ä»¶ä¸ºè‡ªå®šä¹‰çš„CentOS-7-x86_64.cfg</h3>

<p>cobbler profile edit â€“name=CentOS-7-x86_64 â€“kickstart=/var/lib/cobbler/kickstarts/CentOS-7-x86_64.cfg</p>

<p>ç”¨cobbler profile reportæŸ¥çœ‹ï¼ŒKickstartå‰åä¿¡æ¯å·²ç»æ”¹å˜</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 kickstarts]# cobbler profile report
Name                           : centos-7-x86_64
TFTP Boot Files                : {}
Comment                        : 
DHCP Tag                       : default
Distribution                   : centos-7-x86_64
Enable gPXE?                   : 0
Enable PXE Menu?               : 1
Fetchable Files                : {}
Kernel Options                 : {}
Kernel Options (Post Install)  : {}
Kickstart                      : /var/lib/cobbler/kickstarts/sample_end.ks
Kickstart Metadata             : {}
Management Classes             : []
Management Parameters          : &lt;&lt;inherit&gt;&gt;
Name Servers                   : []
Name Servers Search Path       : []
Owners                         : ['admin']
Parent Profile                 : 
Internal proxy                 : 
Red Hat Management Key         : &lt;&lt;inherit&gt;&gt;
Red Hat Management Server      : &lt;&lt;inherit&gt;&gt;
Repos                          : []
Server Override                : &lt;&lt;inherit&gt;&gt;
Template Files                 : {}
Virt Auto Boot                 : 1
Virt Bridge                    : xenbr0
Virt CPUs                      : 2
Virt Disk Driver Type          : raw
Virt File Size(GB)             : 5
Virt Path                      : 
Virt RAM (MB)                  : 4096
Virt Type                      : kvm

[root@cobbler-236 kickstarts]# cobbler profile edit --name=CentOS-7-x86_64 --kickstart=/var/lib/cobbler/kickstarts/CentOS-7-x86_64.cfg
[root@cobbler-236 kickstarts]# cobbler profile report
Name                           : CentOS-7-x86_64
TFTP Boot Files                : {}
Comment                        : 
DHCP Tag                       : default
Distribution                   : centos-7-x86_64
Enable gPXE?                   : 0
Enable PXE Menu?               : 1
Fetchable Files                : {}
Kernel Options                 : {}
Kernel Options (Post Install)  : {}
Kickstart                      : /var/lib/cobbler/kickstarts/CentOS-7-x86_64.cfg
Kickstart Metadata             : {}
Management Classes             : []
Management Parameters          : &lt;&lt;inherit&gt;&gt;
Name Servers                   : []
Name Servers Search Path       : []
Owners                         : ['admin']
Parent Profile                 : 
Internal proxy                 : 
Red Hat Management Key         : &lt;&lt;inherit&gt;&gt;
Red Hat Management Server      : &lt;&lt;inherit&gt;&gt;
Repos                          : []
Server Override                : &lt;&lt;inherit&gt;&gt;
Template Files                 : {}
Virt Auto Boot                 : 1
Virt Bridge                    : xenbr0
Virt CPUs                      : 2
Virt Disk Driver Type          : raw
Virt File Size(GB)             : 5
Virt Path                      : 
Virt RAM (MB)                  : 4096
Virt Type                      : kvm

[root@cobbler-236 kickstarts]# 
</code></pre></div></div>

<h3 id="4-é‡å¯xinetdæœåŠ¡">4. é‡å¯xinetdæœåŠ¡</h3>

<p>systemctl restart xinetd</p>

<h3 id="5-å®‰è£…ç³»ç»Ÿç³»ç»Ÿåè‡ªåŠ¨è®¾å®šipåœ°å€">5. å®‰è£…ç³»ç»Ÿç³»ç»Ÿåï¼Œè‡ªåŠ¨è®¾å®šIPåœ°å€</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 ~]# cobbler system add --name=CentOS-7-x86_64 --mac=00:50:56:9e:ee:2e  --profile=CentOS-7-X86_64  --ip-address=172.17.73.76 --subnet=255.255.252.0 --gateway=172.17.75.254 --interface=eth0 --static=1 --hostname=wyz_au01 --name-servers="114.114.114.114 8.8.8.8"
[root@cobbler-236 ~]# cobbler system list
   CentOS-7-x86_64
[root@cobbler-236 ~]# cobbler sync
task started: 2020-09-17_165512_sync

</code></pre></div></div>

<p>ç½‘ç»œç»„bondï¼š</p>

<p>4ä¸ªç½‘å£ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=eth0 --mac=00:50:56:9e:ee:2e --interface-type=bond_slave --interface-master=bond0
cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=eth1 --mac=00:50:56:9e:ee:2e --interface-type=bond_slave --interface-master=bond0
cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=bond0 --interface-type=bond --bonding-opts="mode=active-backup miimon=100" --ip-address=172.17.73.76 --subnet=255.255.252.0 --gateway=172.17.75.254 --static=1

cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=eth2 --mac=00:50:56:9e:cc:0c --interface-type=bond_slave --interface-master=bond1
cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=eth3 --mac=00:50:56:9e:cc:0c --interface-type=bond_slave --interface-master=bond1
cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=bond1 --interface-type=bond --bonding-opts="mode=active-backup miimon=100" --ip-address=10.1.1.76 --subnet=255.255.255.0 --static=1
</code></pre></div></div>

<p>2ä¸ªç½‘å£ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=eth0 --mac=00:50:56:9e:ee:2e --interface-type=bond_slave --interface-master=bond0
cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=eth1 --mac=00:50:56:9e:cc:0c --interface-type=bond_slave --interface-master=bond1
cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=bond0 --interface-type=bond --bonding-opts="mode=active-backup miimon=100" --ip-address=172.17.73.76 --subnet=255.255.252.0 --gateway=172.17.75.254 --static=1
cobbler system edit --name=CentOS-7-x86_64 --profile=CentOS-7-X86_64 --interface=bond1 --interface-type=bond --bonding-opts="mode=active-backup miimon=100" --ip-address=10.1.1.76 --subnet=255.255.255.0 --static=1
</code></pre></div></div>

<p>è¯´æ˜ï¼š</p>

<p>â€‹    ä¸Šé¢bondä¿¡æ¯ä»…ä¾›å‚è€ƒï¼Œå¹¶æœªæ‰§è¡ŒæˆåŠŸï¼Œå³æœªæ­£å¸¸å½¢æˆbondå…³ç³»ã€‚</p>

<p>å®‰è£…å‚è€ƒï¼š</p>

<p>https://blog.csdn.net/admin_root1/article/details/84965608</p>

<h2 id="ububtu-å®‰è£…">Ububtu å®‰è£…</h2>

<p>è¿™ä¸ªä»¥æˆ‘ä»¬äº§å“ä¸ºç¤ºä¾‹ã€‚</p>

<h3 id="1-æŒ‚è½½é•œåƒ">1. æŒ‚è½½é•œåƒ</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /var/www/cobbler/ks_mirror
mkdir Scaler-8.0-latest
mount /mnt/buildwindow/xenial/virtualstor_scaler_8.0/builds/2020-09-25_00_33_00/VirtualStor\ Scaler-v8.0-413-xenial~202009250033~5f910ea.iso /var/www/cobbler/ks_mirror/Scaler-8.0-latest
</code></pre></div></div>

<h3 id="2-å¯¼å…¥é•œåƒ">2. å¯¼å…¥é•œåƒ</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cobbler import --path=/var/www/cobbler/ks_mirror/Scaler-8.0-latest --name=Scaler-8.0-latest-x86_64  --arch=x86_64
</code></pre></div></div>

<h3 id="3-æ–°å¢system-config">3. æ–°å¢system config</h3>

<p><img class="shadow" src="/img/in-post/cobbler/image-20200925172717405.png" width="1200" /></p>

<p><img class="shadow" src="/img/in-post/cobbler/image-20200925172726750.png" width="1200" /></p>

<p>00:50:56:9e:4c:12 æ˜¯è¢«å®‰è£…ç³»ç»Ÿæ‰€åœ¨VMçš„PXEç½‘ç»œå¯¹åº”çš„macåœ°å€</p>

<p><img class="shadow" src="/img/in-post/cobbler/image-20200925172807485.png" width="1200" /></p>

<p><img class="shadow" src="/img/in-post/cobbler/image-20200925172816714.png" width="1200" /></p>

<p><img class="shadow" src="/img/in-post/cobbler/image-20200925172829380.png" width="1200" /></p>

<p>å…¶ä»–é¡µé¢æœªæˆªå›¾ï¼Œè¡¨æ˜ä½¿ç”¨é»˜è®¤è®¾ç½®ã€‚</p>

<p>ç„¶åé‡å¯vmï¼Œè‡ªåŠ¨è¿›å…¥å®‰è£…ç•Œé¢ã€‚</p>

<h1 id="è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬çš„ä½¿ç”¨">è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬çš„ä½¿ç”¨</h1>

<h2 id="å¿…è¦çš„å®‰è£…åŒ…">å¿…è¦çš„å®‰è£…åŒ…</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y install python3
yum -y install python3-pip
yum -y install vim
yum -y install nfs-utils
yum -y install net-tools
yum -y install tmux
pip3 install pyVmomi
</code></pre></div></div>

<h2 id="ç›¸å…³è„šæœ¬æ¨¡æ¿å‡†å¤‡">ç›¸å…³è„šæœ¬/æ¨¡æ¿å‡†å¤‡</h2>

<p>å¯¹äºUbuntu Scalerï¼Œæ— éœ€ä»»ä½•æ‰‹å·¥å¹²é¢„ï¼Œå…¶preseedæ–‡ä»¶ç›®å‰æ˜¯è‡ªåŠ¨ç”Ÿæˆï¼Œå­˜æ”¾äº <code class="highlighter-rouge">/var/lib/tftpboot/netconf</code>å¯¹åº”ç‰ˆæœ¬ï¼ˆå®‰è£…è„šæœ¬<strong>PXE_MAP</strong>å¤„å®šä¹‰çš„ç‰ˆæœ¬ä¿¡æ¯ï¼‰ç›®å½•ä¸‹ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@cobbler-236 netconf]# ls -l
total 8
drwxr-xr-x 2 root root 4096 Oct  3 18:15 8.0
drwxr-xr-x 3 root root   31 Sep 29 16:06 8.0_centos
-rwxr-xr-x 1 root root  405 Sep 27 10:59 autoinit.sh
[root@cobbler-236 netconf]# 
[root@cobbler-236 netconf]# ls -lR
.:
total 8
drwxr-xr-x 2 root root 4096 Oct  3 18:15 8.0
drwxr-xr-x 3 root root   31 Sep 29 16:06 8.0_centos
-rwxr-xr-x 1 root root  405 Sep 27 10:59 autoinit.sh

./8.0:
total 68
-rw-r--r-- 1 root root 557 Oct  2 22:09 interfaces_cobbler-80
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-11
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-12
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-13
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-14
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-15
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-16
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-17
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-18
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-19
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-20
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-21
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-22
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-23
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-24
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-25
-rw-r--r-- 1 root root 555 Oct  9 16:02 interfaces_pytest-80-26

./8.0_centos:
total 0
drwxr-xr-x 2 root root 84 Sep 29 16:06 cobbler-centos-80

./8.0_centos/cobbler-centos-80:
total 16
-rw-r--r-- 1 root root 206 Oct  9 16:37 ifcfg-bond0
-rw-r--r-- 1 root root 165 Oct  9 16:37 ifcfg-bond1
-rw-r--r-- 1 root root  79 Oct  9 16:37 ifcfg-ens160
-rw-r--r-- 1 root root  79 Oct  9 16:37 ifcfg-ens192
[root@cobbler-236 netconf]#
</code></pre></div></div>

<p>è€Œå¯¹äºCentOS Scaleræ¥è¯´ï¼Œéœ€è¦å…ˆå°† <code class="highlighter-rouge">centos-ezs3-auto-8.0.ks</code> è¿™ä¸ªæ¨¡æ¿ï¼Œäº‹å…ˆå­˜æ”¾åœ¨<code class="highlighter-rouge">/var/lib/cobbler/templates</code>ç›®å½•ä¸‹ï¼Œå½“å‰ksæ–‡ä»¶ï¼Œä»…æ”¯æŒ8.0çš„CentOSä¸‹Scalerçš„å®‰è£…ï¼Œå¦‚æœå°†æ¥æœ‰å…¶ä»–ç‰ˆæœ¬çš„CentOSï¼Œå¯èƒ½éœ€è¦é¢å¤–è°ƒæ•´å®‰è£…è„šæœ¬/æ–°å¢ksæ–‡ä»¶ã€‚</p>

<h2 id="vmé…ç½®æ–‡ä»¶å‡†å¤‡">VMé…ç½®æ–‡ä»¶å‡†å¤‡</h2>

<p>å‚è€ƒç¤ºä¾‹å¦‚ä¸‹ï¼ˆå¯ä»¥åœ¨â€œvmsâ€ä¸­ä»¥{}å½¢å¼ï¼Œå¢åŠ å…¶ä»–èŠ‚ç‚¹ä¿¡æ¯ï¼‰ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "ostype":"ubuntu",
    "version":"8.0",
    "isopath":"latest",
    "vmyesno":"yes",
    "esxuser":"root",
    "esxpass":"p@ssw0rd",
    "disknum":2,
    "disksize":50,
    "osdisk":"yes",
    "osdisksize":60,
    "vms":[
        {
            "hostname":"cobbler-80",
            "esxhost":"172.17.75.184",
            "datastore":"rdqa02",
            "os_disk":"/dev/sda",
            "disknum":6,
            "disksize":30,
            "netconf":[
                {
                    "iface":"bond0",
                    "slave":[
                        "ens160"
                    ],
                    "bond_mode":"active-backup",
                    "address":"172.17.73.81",
                    "netmask":"255.255.252.0",
                    "gateway":"172.17.75.254",
                    "dns-nameservers":"114.114.114.114"
                },
                {
                    "iface":"bond1",
                    "slave":[
                        "ens192"
                    ],
                    "bond_mode":"active-backup",
                    "address":"1.1.1.81",
                    "netmask":"255.255.255.0"
                }
            ]
        }
    ]
}
</code></pre></div></div>

<p>å¯¹äºé…ç½®æ–‡ä»¶ä¸­ç‰ˆæœ¬ä¿¡æ¯ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    "8.0": {
        "buildpath":     "xenial/virtualstor_scaler_8.0/",
        "pxeint":        ["ens160", "ens192", "ens224"]
    },
    "8.0_centos": {
        "buildpath":     "centos7/virtualstor_scaler_8.0/",
        "pxeint":        ["ens160", "ens192", "ens224"]
    },
    "8.0_converger1": {
        "buildpath":     "buster/virtualstor_converger_one_1.0/",
        "pxeint":        ["ens160", "ens192", "ens224"]
    }
</code></pre></div></div>

<ul>
  <li>8.0 è¡¨ç¤ºç‰ˆæœ¬ä¸º8.0çš„Ubuntuç±»å‹çš„Scaler</li>
  <li>8.0_centos è¡¨ç¤ºç‰ˆæœ¬ä¸º8.0çš„CentOSç±»å‹çš„Scaler</li>
  <li>8.0_converger1 è¡¨ç¤ºç‰ˆæœ¬ä¸º8.0çš„ConvergerOne</li>
</ul>

<p>ä¸Šè¿°å€¼ç›®å‰å†™æ­»åœ¨codeä¸­ï¼Œæ‰€ä»¥jsonæ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­<code class="highlighter-rouge">"version":</code>çš„å–å€¼è¦å»é€‚é…è‡ªå·±è¦å®‰è£…çš„ä»€ä¹ˆäº§å“ç±»å‹çš„ISOã€‚</p>

<h1 id="å…¶ä»–">å…¶ä»–</h1>

<p>å¦‚ä½•åˆ¤æ–­ksæ–‡ä»¶æœ‰æ•ˆæ€§</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># yum install pykickstart
</code></pre></div></div>

<p>After installing the package, you can validate a Kickstart file using the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ksvalidator /path/to/kickstart.ks
</code></pre></div></div>

<p>å‚è€ƒï¼š</p>

<p>https://docs.centos.org/en-US/centos/install-guide/Kickstart2/</p>

:ET