<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="自己总结的《pytest测试指南》, 软硬件测试">
    <meta name="description" content="自己总结的《pytest测试指南》一书，超级详细的pytest介绍，以及具体API项目实践和Jenkins CI/CD落地，完整的一套从入门到项目实践的详细记载，值得详细阅读。">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '');
</script>


    <title>自己总结的《pytest测试指南》 | Transcendent</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loader页面消失采用渐隐的方式*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo出现动画 */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//使用渐隐的方法淡出loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//强制显示loading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 7.1.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Transcendent" type="application/atom+xml">
</head>



 <div id="loading-container">
     <p class="loading-text">玩命加载中 . . . </p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/img/loading.gif" data-original="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Transcendent</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/stat" class="waves-effect waves-light">
      
      <i class="fas fa-list-alt" style="zoom: 0.6;"></i>
      
      <span>统计</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-bars" style="zoom: 0.6;"></i>
      
      <span>文章</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/archives">
          
          <i class="fas fa-archive" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>归档</span>
        </a>
      </li>
      
      <li>
        <a href="/categories">
          
          <i class="fas fa-bookmark" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>分类</span>
        </a>
      </li>
      
      <li>
        <a href="/tags">
          
          <i class="fas fa-tags" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>标签</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-star" style="zoom: 0.6;"></i>
      
      <span>关于</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/about">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>知我</span>
        </a>
      </li>
      
      <li>
        <a href="/friends">
          
          <i class="fas fa-address-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>友链</span>
        </a>
      </li>
      
      <li>
        <a href="/goodpapers">
          
          <i class="fas fa-coffee" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>收藏</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/resume" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>简历</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/img/loading.gif" data-original="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Transcendent</div>
        <div class="logo-desc">
            
            资深测试工程师一枚，擅长pytest
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/stat" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-list-alt"></i>
			
			统计
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-bars"></i>
			
			文章
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/archives " style="margin-left:75px">
				  
				   <i class="fa fas fa-archive" style="position: absolute;left:50px" ></i>
			      
		          <span>归档</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories " style="margin-left:75px">
				  
				   <i class="fa fas fa-bookmark" style="position: absolute;left:50px" ></i>
			      
		          <span>分类</span>
                  </a>
                </li>
              
                <li>

                  <a href="/tags " style="margin-left:75px">
				  
				   <i class="fa fas fa-tags" style="position: absolute;left:50px" ></i>
			      
		          <span>标签</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-star"></i>
			
			关于
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>知我</span>
                  </a>
                </li>
              
                <li>

                  <a href="/friends " style="margin-left:75px">
				  
				   <i class="fa fas fa-address-book" style="position: absolute;left:50px" ></i>
			      
		          <span>友链</span>
                  </a>
                </li>
              
                <li>

                  <a href="/goodpapers " style="margin-left:75px">
				  
				   <i class="fa fas fa-coffee" style="position: absolute;left:50px" ></i>
			      
		          <span>收藏</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/resume" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			简历
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/img/pytest/pytest-2.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">自己总结的《pytest测试指南》</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Automation/">
                                <span class="chip bg-color">Automation</span>
                            </a>
                        
                            <a href="/tags/pytest/">
                                <span class="chip bg-color">pytest</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Automation/" class="post-category">
                                Automation
                            </a>
                        
                            <a href="/categories/pytest/" class="post-category">
                                pytest
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2999-12-31
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    4.7k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    21 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="gai-shu">概述</h1>
<p>工作之余，前前后后大约一年半的时间，断断续续的写了这些内容，好记性不如烂笔头，大好几百页，写的非常详细，自己留存下来偶尔看看温习温习。</p>
<h1 id="ben-shu-quan-bu-lian-jie">本书全部链接</h1>
<h2 id="qian-yan">前言</h2>
<p><a href="https://gavin-wang-note.github.io/2023/12/18/pytest_test_guide_preface/">《pytest测试指南》-- 前言 PREFACE</a></p>
<h2 id="di-yi-bu-fen-pytest-ji-chu-pian">第一部分 pytest基础篇</h2>
<p><a href="https://gavin-wang-note.github.io/2023/12/18/pytest_test_guide_part1_preface/">《pytest测试指南》-- 第一章节 前言 PREFACE</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/01/21/pytest_test_guide_part1_chapter1_getting_to_known_pytest/">《pytest测试指南》-- 第一章节1-1 初识pytest</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/02/17/pytest_test_guide_part1_chapter1_2_run_pytest_case/">《pytest测试指南》-- 第一章节1-2 pytest测试用例执行</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/03/03/pytest_test_guide_part1_chapter1_3_1_pytest_params/">《pytest测试指南》-- 第一章节1-3 pytest参数详解</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/05/24/pytest_test_guide_part1_chapter1_4_pytest_mark/">《pytest测试指南》-- 第一章节1-4 pytest测试用例标记</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/05/25/pytest_test_guide_part1_chapter1_5_pytest_assert/">《pytest测试指南》-- 第一章节1-5 pytest断言</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/05/26/pytest_test_guide_part1_chapter1_6_pytest_fixture/">《pytest测试指南》-- 第一章节1-6 pytest fixture</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/05/27/pytest_test_guide_part1_chapter1_7_pytest_internal_fixture/">《pytest测试指南》-- 第一章节1-7 pytest内置fixture</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/05/28/pytest_test_guide_part1_chapter1_8_pytest_parameterize/">《pytest测试指南》-- 第一章节1-8 pytest参数化</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/05/29/pytest_test_guide_part1_chapter1_9_pytest_conftest_pytest_ini/">《pytest测试指南》-- 第一章节1-9 pytest 配置文件</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/05/30/pytest_test_guide_part1_chapter1_10_pytest_plugin/">《pytest测试指南》-- 第一章节1-10 pytest常用插件介绍</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/05/31/pytest_test_guide_part1_chapter1_11_allure/">《pytest测试指南》-- 第一章节1-11 pytest与Allure结合生成测试报告</a></p>
<h2 id="di-er-bu-fen-jie-kou-zi-dong-hua-shi-jian">第二部分 接口自动化实践</h2>
<p><a href="https://gavin-wang-note.github.io/2024/06/01/pytest_test_guide_part2_chapter2_preface/">《pytest测试指南》-- 第二章 前言</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/06/02/pytest_test_guide_part2_chapter2_1_api_and_requests_module/">《pytest测试指南》-- 第二章 2-1 API与requests模块介绍</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/06/03/pytest_test_guide_part2_chapter2_2_code_quality_normalization_checker/">《pytest测试指南》-- 第二章 2-2 代码质量与规范化检查工具-pylint</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/06/04/pytest_test_guide_part2_chapter2_3_api_framework_design/">《pytest测试指南》-- 第二章 2-3 pytest+requests+allure自动化测试框架设计</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/06/05/pytest_test_guide_part2_chapter2_4_cobbler_deploy_iso/">《pytest测试指南》-- 第二章 2-4 Cobbler部署与使用</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/06/06/pytest_test_guide_part2_chapter2_5_jenkins_ci_cd/">《pytest测试指南》-- 第二章 2-5 与Jenkins结合完成CI构建</a></p>
<h2 id="fu-lu">附录</h2>
<p><a href="https://gavin-wang-note.github.io/2024/06/07/pytest_test_guide_appendice_1_debug/">《pytest测试指南》-- 附录1 pytest如何debug</a></p>
<p><a href="https://gavin-wang-note.github.io/2024/06/08/pytest_test_guide_appendice_2_pytest_hook/">《pytest测试指南》-- 附录2 pytest hook介绍</a></p>
<h1 id="qi-ta">其他</h1>
<p>对于<code>pytest hook</code>的详细介绍与应用，敬请期待我的另外一篇汇总博文，将分门别类的详细介绍各个<code>hook</code>的使用场景和案例。</p>
<h1 id="mu-lu-jie-gou">目录结构</h1>
<pre><code class="language-shell">前言 PREFACE	16
自动化是什么	16
为什么要做自动化测试	16
什么项目适合自动化测试	17
本书介绍了什么	18
本书适用于哪些人群	18
序	19
第1章 初识pytest	19
第2章 pytest测试用例执行	19
第3章 pytest参数详解	20
第4章 pytest测试用例标记	20
第5章 pytest断言	20
第6章 pytest精髓-fixture	20
第7章 pytest内置fixture	20
第8章 pytest参数化	20
第9章 pytest配置文件	20
第10章 pytest插件	21
第11章 pytest与Allure结合生成测试报告	21
第12章 API与requests模块介绍	21
第13章 代码质量与规范化检查工具-pylint	21
第14章 pytest+requests+allure自动化测试框架设计	21
第15章 Cobbler部署与使用	21
第16章 与Jenkins结合完成CI构建	22
第1章 初识pytest	22
1.1 常见几种测试框架对比	22
1.2 初识pytest	26
1.2.1 pytest是什么	26
1.2.2 pytest框架结构	27
1.2.3 pytest的优点和特点	29
1.2.4 pytest的官网及资料地址	30
1.3 关于nose 与 pytest	30
1.4 部署pytest	31
1.4.1 环境说明	31
1.4.2 pytest安装	31
1.5 pytest入门	32
1.5.1 基本用法	32
1.5.2 参数化测试	32
1.5.3 测试预期的异常	32
1.5.4 使用 fixture 处理测试前后的准备和清理	33
1.5.5 跳过测试或有条件地跳过测试	33
1.6 本章小结	34
第2章 pytest测试用例执行	34
2.1 pytest 测试搜索规则	35
2.2 pytest 测试默认命名规则	35
2.2.1 测试文件命名规则	35
2.2.2 测试类命名规则	35
2.2.3 测试函数命名规则	35
2.2.4 fixture命名规则	36
2.3 测试用例执行方式	37
2.3.1 main()函数运行	37
2.3.2 pytest命令行运行	44
2.3.3 使用配置文件运行程序	46
2.4 pytest用例的状态	50
2.4.1 PASSED（.）	50
2.4.2 FAILED（F）	50
2.4.3 SKIPPED（s）	50
2.4.4 XFAIL（x）	50
2.4.5 XPASS（X）	50
2.4.6 ERROR（E）	51
2.5 pytest执行结束时返回的状态码	53
2.5.1 pytest exit code用途	53
2.5.2 pytest exit code含义	53
2.5.3 示例参考	55
2.6 测试用例执行顺序	57
2.6.1 pytest 默认执行顺序	57
2.6.2 自定义执行顺序	61
2.6.3 涉及多个目录/文件下执行顺序	61
2.7 本章小结	62
第3章 pytest参数详解	63
3.1 pytest 参数介绍与示例	64
3.1.1 查看pytest所有可用参数	64
3.1.2 分类汇总	71
3.2 pytest help信息介绍	72
3.2.1 positional arguments	72
3.2.2 general 相关参数	72
3.2.3 Reporting 相关参数	93
3.2.4 pytest-warnings 相关参数	123
3.2.5 collection 相关参数	129
3.2.6 test session debugging and configuration 相关参数	146
3.2.7 logging 相关参数	156
3.2.8 [pytest] ini-options 相关参数	166
3.2.9 Environment variables 相关参数	199
3.3 本章小结	203
第4章 pytest测试用例标记	203
4.1 标记（markers）	203
4.1.1 内置标记	204
4.1.2 自定义标记	204
4.2 标记的使用	205
4.2.1 -m 参数执行指定标记的用例	205
4.2.2 跳过（skip）测试	206
4.2.3 标记用例为预期失败	223
4.3 其他标记	230
4.4 测试实践	230
4.4.1 不想被 pytest 执行的文件	230
4.4.2 问题的解法	231
4.5 信息汇总	234
4.5.1 标记使用对比信息汇总	234
4.5.2 pytest 中跳过和忽略测试用例的区别	235
4.6 各种跳过的用法和差异对比	236
4.7 本章小结	238
第5章 pytest断言	239
5.1 什么是断言	239
5.2 断言的时机	240
5.3 断言分类	242
5.3.1 真值断言	242
5.3.2 等值断言	242
5.3.3 不等断言	242
5.3.4 大于/小于断言	242
5.3.5 成员断言	243
5.3.6 身份断言	243
5.3.7 近似值断言	243
5.3.8 组合断言	243
5.3.9 异常断言	243
5.3.10 警示断言	244
5.3.11 自定义断言消息	245
5.4 借鉴nose framework断言	245
5.4.1 nose assert信息	245
5.4.2 nose assert示例	246
5.5 多重校验插件之pytest-assume	250
5.5.1 安装pytest-assume	251
5.5.2 解决无法import assume问题	253
5.5.3 使用pytest-assume	254
5.5.4 pytest-assume teardown的坑	259
5.6 多重校验插件之pytest-check	263
5.6.1 安装pytest-check	263
5.6.2 使用pytest-check	263
5.6.3 示例	264
5.6.4 小结	266
5.7 pytest-check解决pytest-assume teardown的坑	266
5.8 pytest-assume与pytest-check区别	268
5.8.1 使用方式	268
5.8.2 语法风格	268
5.8.3 错误报告	268
5.8.4 内部实现	269
5.8.5 选择如何使用	269
5.9 assert优劣对比	269
5.10 本章小结	270
第6章 pytest精髓-fixture	271
6.1 什么是 pytest fixture?	271
6.2 pytest fixture 的强大之处	271
6.3 fixture介绍	272
6.4 fixture的特性	272
6.5 fixture的优势	273
6.5.1 命令灵活	273
6.5.2 数据共享	273
6.5.3 实现参数化	273
6.6 xunit-style 风格	274
6.6.1 测试类	274
6.6.2 固件方法	275
6.6.3 推荐做法	281
6.7 pytest的fixture实现方式	282
6.7.1 定义fixture	282
6.7.2 调用fixture	283
6.7.3 fixture函数源码解析	284
6.7.4 pytest fixture四种作用域	287
6.7.5 使用params传递参数	295
6.7.6 自动调用fixture	300
6.7.7 params与ids	302
6.7.8 params与name	306
6.7.9 fixture几种清理	309
6.7.10 fixture的并列与嵌套	311
6.8 在不同层级上重写fixture	325
6.8.1 重写conftest.py中的fixture	325
6.8.2 在模块层级重写fixture	331
6.8.3 参数化重写fixture	332
6.8.4 参数化fixture重写非参数化fixture，反之亦然	334
6.9 conftest.py	336
6.9.1 conftest.py 文件的查找和加载机制	336
6.9.2 conftest.py使用场景	336
6.9.3 conftest.py中fixture的作用域	337
6.9.4 不同位置conftest.py文件的作用域	338
6.9.5 conftest.py使用方法	338
6.9.6 conftest.py结语	342
6.10 本章小结	342
第7章 pytest内置fixture	343
7.1 pytest 内置 fixture 按功能分类	343
7.1.1 基础测试设置与清理	344
7.1.2 记录测试套件属性	344
7.1.3 配置和测试功能	344
7.1.4 高级测试执行控制	345
7.2 内置fixture详解	345
7.2.1 基础测试设置与清理	345
7.2.2 高级测试执行控制	366
7.2.3 配置和测试功能	367
7.2.4 记录测试套件属性	381
7.2.5 临时目录相关	395
7.3 本章小结	402
第8章 pytest参数化	403
8.1 参数化的概念	403
8.2 使用 parameterize 的优势	403
8.3 pytest.mark.parameterize 的用法	403
8.4 常见的参数化示例	404
8.4.1 只传递一个参数	404
8.4.2 多个参数	408
8.4.3 参数化	415
8.5 parametrize源码详解	417
8.6 argnames参数	423
8.6.1 测试一般函数行为	423
8.6.2 边界值和错误情况	424
8.6.3 参数化多重模块或类	425
8.6.4 兼容性测试	427
8.6.5 等价类划分	429
8.6.6 异常和特殊条件测试	431
8.6.7 常见的argnames语法异常	433
8.7 argvalues参数	435
8.7.1 正常情况下为argvalues赋值	435
8.7.2 特殊情况 - 参数化特定值导致的异常	436
8.7.3 argvalues来自pytest.param	437
8.7.4 argvalues来自外部	438
8.7.5 使用 pytest.mark.parametrize 的 argvalues 参数注意事项	441
8.8 indirect参数	441
8.8.1 示例一：基本使用场景	441
8.8.2 示例二：测试不同用户权限	442
8.8.3 小结	443
8.9 ids参数	443
8.9.1 ids 长度	443
8.9.2 ids 相同	445
8.9.3 使用中文作为ids	446
8.9.4 通过函数生成ids	447
8.9.5 ids 覆盖	448
8.9.6 ids 的作用	454
8.9.7 注意事项和进一步说明	456
8.10 scope参数	456
8.10.1 module级别	457
8.10.2 未指定scope	458
8.11 pytest_generate_tests hook方法	458
8.11.1 pytest 参数化方式	458
8.11.2 pytest_generate_tests hook方法介绍	459
8.12 优化范本	463
8.13 参数化最佳实践	464
8.14 本章小结	465
第9章 pytest配置文件	466
9.1 pytest 配置文件分类	466
9.2 哪些内容可以放在 pytest.ini 文件中	467
9.3 配置文件pytest.ini	469
9.3.1 应用场景	470
9.3.2 pytest.ini 使用方法	470
9.3.3 结合使用 conftest.py 和 pytest.ini	474
9.3.4 使用 pytest.ini 的优势	475
9.3.5 小结	475
9.4 配置文件pyproject.toml	475
9.5 配置文件tox.ini	477
9.6 配置文件 setup.cfg	479
9.6.1 setup.cfg 文件的结构	479
9.6.2 pytest 配置示例	479
9.6.3 setuptools 和 pytest 结合的完整配置示例	480
9.7 pytest配置文件读取顺序	481
9.7.1 配置文件读取顺序	481
9.7.2 覆盖默认的配置文件读取顺序	482
9.8 pytest的warning处理机制	483
9.8.1 使用pytest配置文件忽略特定警告	483
9.8.2 使用pytest配置文件禁用warnings插件方式	483
9.8.3 在命令行中使用-W选项	483
9.8.4 在代码中使用warnings模块处理警告	483
9.8.5 使用pytest.mark.filterwarnings忽略特定测试的警告	484
9.8.6 忽略所有告警	484
9.8.7 禁用 warning 实践	485
9.9 本章小结	488
第10章 pytest插件	488
10.1 插件分类	489
10.1.1 内置插件	489
10.1.2 第三方插件	489
10.1.3 自开发的插件	490
10.2 查看可用的插件	490
10.3 加载/禁用插件	490
10.4 pytest启动时插件发现顺序	490
10.5 pytest常用插件介绍	491
10.5.1 进度条相关插件	491
10.5.2 用例执行顺序相关插件	495
10.5.3 用例运行相关插件	503
10.5.4 CI/CD相关插件	539
10.5.5 测试时间相关插件	544
10.5.6 构造测试数据相关	556
10.5.7 测试报告相关	573
10.5.8 其他插件	585
10.6 本章小结	588
第11章 pytest与Allure结合生成测试报告	589
11.1 Allure框架介绍	589
11.2 Allure如何生成报告	590
11.2.1 安装 Allure CLI 工具	590
11.2.2 集成 Allure 到你的测试框架中	591
11.2.3 运行测试并生成数据	591
11.2.4 生成 Allure 报告	591
11.3 Allure 报告组成	591
11.3.1 概览（Overview）	592
11.3.2 类别（Categories）	593
11.3.3 测试套（Suites）	594
11.3.4 图表（Graphs）	595
11.3.5 时间刻度（Timeline）	598
11.3.6 功能（Behaviors）	599
11.3.7 包（Packages）	599
11.4 Allure功能介绍	600
11.4.1 帮助 --help	600
11.4.2 Environment	603
11.4.3 Categories	605
11.4.4 Allure属性	606
11.4.5 Allure 实践	608
11.4.6 综合示例	628
11.5 结语	630
11.5.1 设置测试套中显示内容	630
11.5.2 设置报告中功能项显示内容	630
11.5.3 设置具体用例显示内容	630
11.5.4 设置用例级别	630
11.6 注意事项	631
11.7 本章小结	631
第12章 API与requests模块介绍	631
12.1 什么是API	632
12.2 API的组成	634
12.3 API的主要特点	636
12.4 API的工作流程	637
12.5 API的分类	638
12.6 Web API	639
12.6.1 RESTful API	640
12.6.2 SOAP API	643
12.6.3 GraphQL API	646
12.7 认证与授权之Cookie、Session、Token、JWT	648
12.7.1 认证与授权	648
12.7.2 授权实现方式	650
12.8 API测试	662
12.8.1 HTTP 请求方法	663
12.8.2 HTTP状态码	664
12.8.3 Python的requests库介绍	665
12.8.4 基于requests实现HTTP请求	675
12.9 本章小结	678
第13章 代码质量与规范化检查工具-pylint	678
13.1 pylint介绍	679
13.1.1 pylint是什么	679
13.1.2 核心特性	679
13.1.3 安装pylint	679
13.1.4 基本使用	679
13.1.5 消息类型	679
13.1.6 输出解析	680
13.1.7 配置	680
13.1.8 禁止检查	680
13.1.9 与IDE集成	680
13.1.10 CI/CD集成	680
13.1.11 使用Pylint注意事项	680
13.2 pylint配置文件 .pylintrc	681
13.2.1 .pylintrc 文件	681
13.2.2 常用的配置参数和示例	682
13.2.3 在代码中覆盖.pylintrc配置	683
13.2.4 生成默认的.pylintrc文件	683
13.2.5 综合管理Pylint消息	683
13.3 pylint错误消除	683
13.3.1 生成初始的.pylintrc文件（如果还没有）	683
13.3.2 编辑.pylintrc文件内的[MESSAGES CONTROL]部分	683
13.3.3 告警的错误码及描述	684
13.3.4 示例说明如何消除告警	684
13.3.5 检查告警ID	684
13.3.6 应用.pylintrc文件的配置	685
13.3.7 修复pylint告警实践	685
13.4 本章小结	686
第14章 pytest+requests+allure自动化测试框架设计	686
14.1 搭建自己的接口测试框架	686
14.1.1 为何要搭建自己的测试框架	686
14.1.2 如何规划框架	687
14.1.3 CI/CD 工具选择	690
14.1.4 结合被测产品选择合适工具	691
14.2 工具&amp;框架选型	692
14.3 测试用例设计规约	693
14.3.1 规约要求	693
14.3.2 示例说明	694
14.4 框架设计介绍	695
14.4.1 框架目录结构	695
14.4.2 第一层目录介绍	698
14.4.3 第二层目录介绍	720
14.4.4 Allure报告	750
14.4.5 框架设计小结	751
14.5 本章小结	756
第15章 Cobbler部署与使用	756
15.1 Cobbler介绍	756
15.2 Cobbler工作原理	757
15.3 Cobbler目录结构简介	760
15.3.1 Cobbler配置文件目录	760
15.3.2 Cobbler数据目录	761
15.3.3 Cobbler日志文	761
15.4 部署Cobbler	761
15.4.1 IP规划	761
15.4.2 查看系统信息	762
15.4.3 配置IP	762
15.4.4 配置 ssh	764
15.4.5 关闭防火墙、selinux等	765
15.4.6 安装wget	765
15.4.7 安装epel源	765
15.4.8 新增一个分区，增加ISO自动挂载	765
15.4.9 安装cobbler	766
15.4.10 启动相关服务并设置开机自启	766
15.4.11 检查cobbler配置	766
15.4.12 安装其他包	768
15.4.13 重启cobblerd并同步检查	768
15.4.14 通过cobbler来管理dhcp	768
15.4.15 配置DHCP服务	768
15.5 部署Nginx	769
15.5.1 安装Nginx	769
15.5.2 设置开机启动	769
15.5.3 配置Nginx	770
15.6 手动安装实践	772
15.6.1 安装CentOS7	772
15.6.2 Ububtu 安装	777
15.7 自动化安装脚本的使用	781
15.7.1 必要的安装包	781
15.7.2 相关脚本/模板准备	781
15.7.3 配置文件准备	783
15.7.4 批量部署脚本代码说明	786
15.7.5 安装过程	788
15.7.6 与Jenkins的结合	795
15.8 本章小结	796
第16章 与Jenkins结合完成CI构建	797
16.1 CI/CD介绍	797
16.2 CI/CD系列工具介绍	799
16.2.1 TeamCity	799
16.2.2 Jenkins	800
16.2.3 Bamboo	800
16.2.4 CircleCI	801
16.2.5 Travis CI	801
16.2.6 Codeship	801
16.2.7 CI/CD工具大比拼	802
16.3 部署Jenkins	802
16.3.1 安装Ubuntu 22.04	802
16.3.2 安装必要的软件包	803
16.3.3 配置Jenkins	804
16.4 Groovy介绍	805
16.4.1 Jenkins Script Console	805
16.4.2 管道脚本（Pipelines）	805
16.4.3 动态作业生成	806
16.4.4 插件开发	806
16.4.5 管理和配置	806
16.4.6 示例脚本	806
16.4.7 安全注意事项	806
16.4.8 小结	806
16.5 pipline介绍	807
16.5.1 pipeline 的主要特点	807
16.5.2 Jenkins Pipeline 核心概念	807
16.5.3 Pipeline 的两种语法	808
16.5.4 Jenkinsfile 示例	808
16.5.5 小结	809
16.6 项目实践	809
16.6.1 Jenkins pipline style Project 配置	813
16.6.2 Email 模板	816
16.6.3 效果展示	817
16.7 本章小结	822
</code></pre>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Gavin Wang</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://gavin-wang-note.github.io/2999/12/31/pytest_test_guide_book/">https://gavin-wang-note.github.io/2999/12/31/pytest_test_guide_book/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Gavin Wang</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Automation/">
                                    <span class="chip bg-color">Automation</span>
                                </a>
                            
                                <a href="/tags/pytest/">
                                    <span class="chip bg-color">pytest</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/img/loading.gif" data-original="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/img/loading.gif" data-original="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2999/12/31/pytest_test_guide_book/">
                    <div class="card-image">
                        
                        <img src="/img/loading.gif" data-original="/img/pytest/pytest-2.png" class="responsive-img" alt="自己总结的《pytest测试指南》">
                        
                        <span class="card-title">自己总结的《pytest测试指南》</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            自己总结的《pytest测试指南》一书，超级详细的pytest介绍，以及具体API项目实践和Jenkins CI/CD落地，完整的一套从入门到项目实践的详细记载，值得详细阅读。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2999-12-31
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Automation/" class="post-category">
                                    Automation
                                </a>
                            
                            <a href="/categories/pytest/" class="post-category">
                                    pytest
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Automation/">
                        <span class="chip bg-color">Automation</span>
                    </a>
                    
                    <a href="/tags/pytest/">
                        <span class="chip bg-color">pytest</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2999/12/29/rrs/">
                    <div class="card-image">
                        
                        
                        <img src="/img/loading.gif" data-original="/medias/featureimages/250.jpg" class="responsive-img" alt="博客RRS订阅出现XML内容">
                        
                        <span class="card-title">博客RRS订阅出现XML内容</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            博客进行RRS订阅时，出现XML内容的解决方案
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2999-12-29
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/RRS/" class="post-category">
                                    RRS
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/RRS/">
                        <span class="chip bg-color">RRS</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Transcendent<br />'
            + '文章作者: Gavin Wang<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('2'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2009-2024</span>
            
            <a href="/about" target="_blank">Gavin Wang</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
                <span id="translate">|&nbsp;繁/简：</span><a id="translateLink" href="javascript:translatePage();">繁</a>
            
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">857.7k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:250556531@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=250556531" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 250556531" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        <script type="text/javascript" src="/js/tw_cn.js"></script>
        <script type="text/javascript">
          var defaultEncoding = 2; //网站编写字体是否繁体，1-繁体，2-简体
          var translateDelay = 0; //延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0
          var cookieDomain = "https://gavin-wang-note.github.io"; //Cookie地址, 一定要设定, 通常为你的网址
          var msgToTraditionalChinese = "繁"; //此处可以更改为你想要显示的文字
          var msgToSimplifiedChinese = "简"; //同上，但两处均不建议更改
          var translateButtonId = "translateLink"; //默认互换id
          translateInitilization();
        </script>
    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/star.js"><\/script>');
            }
        </script>
    

    

    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    


        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,c=(r.imageLazyLoadSetting.preloadRatio,n());function n(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=n());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight+240||document.documentElement.clientHeight+240)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function a(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",a),r.addEventListener("resize",a),r.addEventListener("orientationchange",a)}(this);</script></body>

</html>
